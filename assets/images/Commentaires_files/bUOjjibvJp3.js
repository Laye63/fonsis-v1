if (self.CavalryLogger) { CavalryLogger.start_js(["WGjBO"]); }

__d("VideoViewabilityKeyEvents",[],(function a(b,c,d,e,f,g){f.exports={Events:["entered_fs","exited_fs","finished_playing","paused","player_format_changed","started_playing","unpaused"]}}),null);
__d("MCustomDialog",["DOM","cx","ge"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k={show:function l(m){__p&&__p();var n=h.create("div",{className:"_3uug"},null),o=h.create("div",{className:"_3uuh"},h.create("h2",null,m.titleString)),p=h.create("div",{className:"_3uui"},h.create("p",null,m.descriptionString)),q=h.create("p",{className:"_3uuj"},m.dismissButtonString),r=h.create("div",{className:"_3uuk"},q);h.appendContent(n,o);h.appendContent(n,p);h.appendContent(n,r);if(m.confirmButtonString&&m.confirmButtonCallback){var s=h.create("p",{className:"_3uuj"},m.confirmButtonString);h.prependContent(r,s)}var t=h.create("div",{className:"_3uul"},n);q.addEventListener("click",function(){h.remove(t);m.dismissButtonCallback&&m.dismissButtonCallback()});s&&s.addEventListener("click",function(){h.remove(t);m.confirmButtonCallback&&m.confirmButtonCallback()});var u=j("root");if(u)h.prependContent(u,t)}};f.exports=k}),null);
__d("MFullScreen",[],(function a(b,c,d,e,f,g){__p&&__p();var h={debounce:function i(j,k,l){__p&&__p();var m;return function(){var n=this,o=arguments,p=function p(){m=null;if(!l)j.apply(n,o)},q=l&&!m;clearTimeout(m);m=setTimeout(p,k);if(q)j.apply(n,o)}},isSupported:function i(){var j=document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.fullscreenEnabled,k=document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.cancelFullScreen||document.exitFullScreen;return j&&k},isFullScreen:function i(){return document.webkitIsFullScreen||document.fullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},enableFullScreen:function i(j){__p&&__p();if(j.webkitRequestFullScreen)j.webkitRequestFullScreen();else if(j.mozRequestFullScreen)j.mozRequestFullScreen();else if(j.msRequestFullscreen)j.msRequestFullscreen();else if(j.requestFullScreen)j.requestFullScreen();else if(j.requestFullscreen)j.requestFullscreen();else if(j.webkitRequestFullscreen)j.webkitRequestFullscreen()},disableFullScreen:function i(){__p&&__p();if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else if(document.cancelFullScreen)document.cancelFullScreen();else if(document.exitFullScreen)document.exitFullScreen()},listenForFullScreenEvent:function i(j,k){var l=this.debounce(k,500);j.addEventListener("webkitfullscreenchange",l);j.addEventListener("mozfullscreenchange",l);j.addEventListener("MSFullscreenChange",l);j.addEventListener("fullscreenchange",l)},removeFullScreenEventListeners:function i(j,k){var l=this.debounce(k,500);j.removeEventListener("webkitfullscreenchange",k);j.removeEventListener("mozfullscreenchange",k);j.removeEventListener("MSFullscreenChange",k);j.removeEventListener("fullscreenchange",l)}};f.exports=h}),null);
__d("SubRipText",[],(function a(b,c,d,e,f,g){__p&&__p();var h={size:"90%"};function i(t){__p&&__p();var u=Number(t.substr(0,t.length-1)),v=t.substr(-1);switch(v){case"s":return u;case"m":return u*60;case"h":return u*3600}var w=t.split(":");u=Number(w[w.length-1].replace(/,/,"."));if(w.length>1)u+=Number(w[w.length-2])*60;if(w.length>2)u+=Number(w[w.length-3])*3600;return u}function j(t){__p&&__p();var u=t.split(/\r\n|\r|\n/).map(function(z){return z.trim()}),v=[],w=0;do{var x=u.indexOf("",w);if(x<0)x=u.length;var y=l(u.slice(w,x));if(y)v.push(y);w=x+1}while(w>0&&w<u.length);return v}function k(t){var u=t.split("-->");if(u.length!=2)return null;var v=i(u[0].trim()),w=i(u[1].trim());if(Number.isNaN(w)||Number.isNaN(v))return null;return{begin:v,end:w}}function l(t){if(t.length<3)return null;var u=m(t[0]),v=k(t[1]);if(!v)return null;return{counter:u,begin:v.begin,end:v.end,text:t.slice(2,6)}}function m(t){return Number(t.trim())}function n(t){var u=t.split(".");if(u[0].length<2)return"0"+u.join(".");return u.join(".")}function o(t){var u=n(Math.floor(t/3600).toString()),v=n(Math.floor(t%3600/60).toString()),w=n((t%60).toFixed(3));return u+":"+v+":"+w}function p(t,u,v){var w="";if(v)for(var x in v)w+=" "+x+":"+v[x];return o(t)+" --> "+o(u)+w}function q(t,u){return t.counter+"\n"+p(t.begin,t.end,u)+"\n"+t.text.join("\n")+"\n"}function r(t,u){return"WEBVTT\n\n"+t.map(function(v){return q(v,u)}).join("\n")}function s(t){"use strict";this.$SubRipText1=j(t);this.$SubRipText1.sort(function(u,v){return u.counter-v.counter});this.$SubRipText2=this.$SubRipText1.map(function(u,v){return v}).sort(function(u,v){return this.$SubRipText1[u].begin-this.$SubRipText1[v].begin}.bind(this));this.invalidateCache();this.$SubRipText6=h}s.prototype.$SubRipText7=function(t){"use strict";return this.$SubRipText1[this.$SubRipText2[t]]};s.prototype.$SubRipText8=function(t){"use strict";__p&&__p();var u=this.$SubRipText3;while(u<this.$SubRipText2.length){var v=this.$SubRipText7(u);if(v.begin<=t){this.$SubRipText4.push(v);u++}else break}this.$SubRipText3=u};s.prototype.$SubRipText9=function(t){"use strict";this.$SubRipText4=this.$SubRipText4.filter(function(u){return u.end>t})};s.prototype.invalidateCache=function(){"use strict";this.$SubRipText5=0;this.$SubRipText4=[];this.$SubRipText3=0};s.prototype.setStyle=function(t){"use strict";this.$SubRipText6=t};s.prototype.getSubtitles=function(t){"use strict";if(t<this.$SubRipText5)this.invalidateCache();this.$SubRipText5=t;this.$SubRipText8(t);this.$SubRipText9(t);return this.$SubRipText4.reduce(function(u,v){return u.concat(v.text)},[])};s.prototype.renderVTT=function(){"use strict";return r(this.$SubRipText1,this.$SubRipText6)};f.exports=s}),null);
__d("MVideoSubtitles",["DOM","EventListener","SubRipText","XHRRequest","emptyFunction","fbt","getCrossOriginTransport"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=b.URL||b.webkitURL;function p(q){"use strict";this.$MVideoSubtitles1=q;this.$MVideoSubtitles2=l}p.prototype.$MVideoSubtitles3=function(q){"use strict";var r=new j(q),s=new Blob([r.renderVTT()],{type:"text/vtt"});return o.createObjectURL(s)};p.prototype.loadSubtitles=function(q){"use strict";if(!o)return;new k(q).setTransportBuilder(n).setMethod("GET").setResponseHandler(function(r){this.$MVideoSubtitles4(this.$MVideoSubtitles3(r))}.bind(this)).send()};p.prototype.$MVideoSubtitles4=function(q){"use strict";var r=h.create("track",{label:m._("Oui"),kind:"captions",src:q});i.listen(r,"load",function(){this.$MVideoSubtitles2()}.bind(this));h.appendContent(this.$MVideoSubtitles1,r);this.hideSubtitles()};p.prototype.showSubtitles=function(){"use strict";Array.prototype.forEach.call(this.$MVideoSubtitles1.textTracks,function(q){return q.mode="showing"})};p.prototype.hideSubtitles=function(){"use strict";Array.prototype.forEach.call(this.$MVideoSubtitles1.textTracks,function(q){return q.mode="hidden"})};p.prototype.setOnSubtitlesReady=function(q){"use strict";this.$MVideoSubtitles2=q};f.exports=p}),null);
__d("Network",["mixInEventEmitter"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=true,j=b.navigator.connection,k={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"};function l(){return i}function m(r){if(r==i)return;i=r;q.emit(r?"online":"offline")}function n(){return j?j.bandwidth:i?Infinity:0}function o(){return j?j.metered:false}function p(){var r=j?String(j.type):"0";return k[r]||r}var q={getBandwidth:n,getType:p,isMetered:o,isOnline:l,setOnline:m};h(q,{online:true,offline:true});if(b.addEventListener){b.addEventListener("online",m.bind(null,true));b.addEventListener("offline",m.bind(null,false))}else if(b.attachEvent){b.attachEvent("online",m.bind(null,true));b.attachEvent("offline",m.bind(null,false))}f.exports=q}),null);
__d("isCdnURI",["CdnAkamaiDomainsConfig"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j){if(j.getProtocol()!=="http"&&j.getProtocol()!=="https")return false;var k=j.getPort();if(!!k&&k!==80&&k!==443)return false;if(j.isSubdomainOfDomain("fbcdn.net"))return true;return h[j.getDomain()]!=undefined}f.exports=i}),null);
__d("MVideoUtils",["Bootloader","CSS","DataAttributeUtils","DOM","MParent","MVideoExperiments","MVideoSubtitles","Network","SubscriptionsHandler","URI","cx","getViewportDimensions","setTimeoutAcrossTransitions","isCdnURI"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();var v=.5,w=0,x=null,y=null,z=null,A={PLAY_SIGIL:"playInlineVideo",INSERTION_POINT_SIGIL:"inlineVideo",LOADING_CLASS:"_2nmc",SHOWN_CLASS:"_53mu",SHOWN_CLASS_WITH_DOWNLOAD:"_2qoq",PLAYER_CLASS:"_53mv",FULL_WIDTH_PLAYER_CLASS:"_2c9v",SHOW_PAUSE_CLASS:"_3gzh",SPHERICAL_CLASS:"_4a1j",DEBUGGER_CLASS:"_4551",PLAYER_ID:{video:"mInlineVideoPlayer",iframe:"mInlineVideoFrame"},PLAYER_ATTRS:{video:function B(C){return{autobuffer:"true",controls:C?undefined:"controls","x-webkit-airplay":"allow",controlslist:"nodownload"}},iframe:function B(){return{frameBorder:0}}},PLAYER_STATE:{playing:"playing",paused:"paused"},createNodeFromTag:function B(C,D,E,F){var G=null;if(D||!E||E.id!==this.PLAYER_ID[C])G=k.create(C,this.PLAYER_ATTRS[C](!!D));else G=E;G.id=this.PLAYER_ID[C];i.conditionClass(G,this.FULL_WIDTH_PLAYER_CLASS,F);i.conditionClass(G,this.PLAYER_CLASS,true);return G},onPlay:function B(C){i.conditionClass(C,this.SHOW_PAUSE_CLASS,false)},onPause:function B(C){i.conditionClass(C,this.SHOW_PAUSE_CLASS,true)},play:function B(C){__p&&__p();if(m.isKaiOS){if(C)C.play();return}if(C)C.load();if(m.msite_remove_play_timeout){if(C)C.play()}else t(function(){if(C)C.play()},100)},setVideoDimensions:function B(C,D){if(C.width)D.setAttribute("width",C.width);if(C.height)D.setAttribute("height",C.height)},setSubtitles:function B(C,D){var E;if(u(new q(C.subtitlesSrc)))(function(){var F=new n(D);F.setOnSubtitlesReady(function(){return F.showSubtitles()});F.loadSubtitles(C.subtitlesSrc)})()},setupListenersOnPlay:function B(C,D,E){if(!C)C=new p();C.addSubscriptions(k.listen(D,"pause",null,function(){return this.onPause(E)}.bind(this)),k.listen(D,"play",null,function(){return this.onPlay(E)}.bind(this)))},getStoryNode:function B(C){return C&&C.getNode("story-div")},getStoryNodeForVideoNode:function B(C){return l.bySigil(C,"story-div")},_handleLoggingOnPlayWithBootload:function B(C,D,E,F){__p&&__p();if(x.isLoggedIn()){F=this.getStoryNode(C)||F;if(F){var G=j.getDataFt(F);if(G){var H={ft:JSON.parse(G)};if(D){var I=D.getLogger();I.setFTData(H)}if(E.fbid&&E.ownerID){G=y.parse(G,f.id);G.video_info={video_id:E.fbid,owner_id:E.ownerID};G=y.stringify(G)}new z("/feedtracking/").setMethod("POST").setData({ft_data:G,clicked_uri:E.src,tn:E.trackingNodes}).send()}}}},handleLoggingOnPlay:function B(C,D,E,F){h.loadModules(["CurrentUser","FBJSON","MRequest"],function(G,H,I){x=G;y=H;z=I;A._handleLoggingOnPlayWithBootload(C,D,E,F)},"MVideoUtils")},getHumanReadbleSize:function B(C){var D=1e3,E=D*D,F=D*D*D;if(C>F)return this.formatNumber(C,F,2)+" GB";else return this.formatNumber(C,E,1)+" MB"},formatNumber:function B(C,D,E){return Math.ceil(C/(D/Math.pow(10,E)))/Math.pow(10,E)},getDownloadProgressText:function B(C,D){return A.getHumanReadbleSize(C)+" / "+A.getHumanReadbleSize(D)},getDownloadProgressPercentage:function B(C,D){var E=C/D*100;E=E.toFixed(1);return E.toString()},getConnectivityType:function B(){var C=o.getType(),D=null;if(C=="wifi"||C=="WIFI")D="WIFI";else if(C=="cellular"||C=="2g"||C=="3g"||C=="wwan")D="MOBILE";return D},getNetworkBandwidth:function B(){var C=null;if("connection"in navigator)if("downlinkMax"in navigator.connection)C=navigator.connection.downlinkMax;var D=null;try{D=parseFloat(C)}catch(E){}return D},getAvailableQualitiesString:function B(C){return C&&C.join(", ")},setAttributes:function B(C,D){if(D.spherical)C.setAttribute("crossorigin","anonymous");C.setAttribute("playInFullScreen",D.playInFullScreen);if(!D.playInFullScreen)if(m.addPlaysInline)C.setAttribute("playsinline",true);if(D.muted)C.muted=true},isVisible:function B(C){var D=s().height,E=s().width;if(C.height===0)return false;var F=C.y-w+(1-v)*C.height,G=C.y+v*C.height,H=C.x+(1-v)*C.width,I=C.x+v*C.width;if(F<0||G>=D||H<0||I>=E)return false;return true}};f.exports=A}),null);
__d("MInlineVideoDebugger",["CSS","DOM","MVideoUtils"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();function k(l,m){"use strict";this.$MInlineVideoDebugger6=m;this.$MInlineVideoDebugger7(l);this.$MInlineVideoDebugger8();this.$MInlineVideoDebugger9();this.$MInlineVideoDebugger10();this.$MInlineVideoDebugger11()}k.prototype.$MInlineVideoDebugger7=function(l){"use strict";this.$MInlineVideoDebugger1=i.create("div");h.conditionClass(this.$MInlineVideoDebugger1,j.DEBUGGER_CLASS,true);i.insertAfter(l,this.$MInlineVideoDebugger1)};k.prototype.$MInlineVideoDebugger8=function(){"use strict";this.$MInlineVideoDebugger2=i.create("div");i.appendContent(this.$MInlineVideoDebugger1,this.$MInlineVideoDebugger2)};k.prototype.$MInlineVideoDebugger9=function(){"use strict";this.$MInlineVideoDebugger3=i.create("div");i.appendContent(this.$MInlineVideoDebugger1,this.$MInlineVideoDebugger3)};k.prototype.$MInlineVideoDebugger10=function(){"use strict";this.$MInlineVideoDebugger4=i.create("div");i.appendContent(this.$MInlineVideoDebugger1,this.$MInlineVideoDebugger4)};k.prototype.$MInlineVideoDebugger11=function(){"use strict";this.$MInlineVideoDebugger5=i.create("div");i.appendContent(this.$MInlineVideoDebugger1,this.$MInlineVideoDebugger5);this.updateVideoIdDebugger(this.$MInlineVideoDebugger6.videoID)};k.prototype.updateViewabilityLoggingDebugger=function(l){"use strict";i.setContent(this.$MInlineVideoDebugger2,"viewability:"+l)};k.prototype.updatePlayerStateDebugger=function(l){"use strict";i.setContent(this.$MInlineVideoDebugger3,"player state:"+l)};k.prototype.updateLastActionReasonDebugger=function(l){"use strict";i.setContent(this.$MInlineVideoDebugger4,"lastActionReason:"+l)};k.prototype.updateVideoIdDebugger=function(l){"use strict";i.setContent(this.$MInlineVideoDebugger5,"video ID:"+l)};k.prototype.cleanUp=function(){"use strict";i.remove(this.$MInlineVideoDebugger1)};f.exports=k}),null);
__d("Deferred",["Promise"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();h.resolve();function i(j){j=j||h;this.$Deferred1=false;this.$Deferred2=new j(function(k,l){this.$Deferred3=k;this.$Deferred4=l}.bind(this))}i.prototype.getPromise=function(){return this.$Deferred2};i.prototype.resolve=function(j){this.$Deferred1=true;this.$Deferred3(j)};i.prototype.reject=function(j){this.$Deferred1=true;this.$Deferred4(j)};i.prototype["catch"]=function(j){return h.prototype["catch"].apply(this.$Deferred2,arguments)};i.prototype.then=function(j,k){return h.prototype.then.apply(this.$Deferred2,arguments)};i.prototype.done=function(j,k){var l=arguments.length?this.$Deferred2.then.apply(this.$Deferred2,arguments):this.$Deferred2;l.then(undefined,function(m){setTimeout(function(){throw m},0)})};i.prototype.isSettled=function(){return this.$Deferred1};f.exports=i}),null);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i.ArrayStrategies,k=i.checkArrayStrategy,l=i.checkMergeArrayArgs,m=i.checkMergeLevel,n=i.checkMergeObjectArgs,o=i.isTerminal,p=i.normalizeMergeArg,q=function q(u,v,w,x){n(u,v);m(x);var y=v?Object.keys(v):[];for(var z=0;z<y.length;z++){var A=y[z];s(u,v,A,w,x)}},r=function r(u,v,w,x){l(u,v);m(x);if(w===j.Concat)u.push.apply(u,v);else{var y=Math.max(u.length,v.length);for(var z=0;z<y;z++)s(u,v,z,w,x)}},s=function s(u,v,w,x,y){__p&&__p();var z=v[w],A=Object.prototype.hasOwnProperty.call(v,w),B=A&&o(z),C=A&&Array.isArray(z),D=A&&!C&&!C,E=u[w],F=Object.prototype.hasOwnProperty.call(u,w),G=F&&o(E),H=F&&Array.isArray(E),I=F&&!H&&!H;if(G){if(B)u[w]=z;else if(C){u[w]=[];r(u[w],z,x,y+1)}else if(D){u[w]={};q(u[w],z,x,y+1)}else if(!A)u[w]=E}else if(H)if(B)u[w]=z;else if(C){j[x]||h(0);if(x===j.Clobber)E.length=0;r(E,z,x,y+1)}else if(D){u[w]={};q(u[w],z,x,y+1)}else!A;else if(I)if(B)u[w]=z;else if(C){u[w]=[];r(u[w],z,x,y+1)}else if(D)q(E,z,x,y+1);else!A;else if(!F)if(B)u[w]=z;else if(C){u[w]=[];r(u[w],z,x,y+1)}else if(D){u[w]={};q(u[w],z,x,y+1)}else!A},t=function t(u,v,w){var x=p(v);k(w);q(u,x,w,0)};f.exports=t}),null);
__d("AsyncStorage",["Deferred","mergeDeepInto","mergeHelpers"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=j.ArrayStrategies,l=window.indexedDB,m=1,n="data",o=false,p=void 0,q=Date.now(),r=new h();function s(){__p&&__p();var v=l.open("AsyncStorage",m);v.onerror=function(event){var w=new Error("Failed to open AsyncStorage IndexedDB instance.");r.reject(w)};v.onsuccess=function(event){o&&false;p=event.target.result;r.resolve({db:p});p.onerror=function(w){var x=new Error("AsyncStorage error: "+w.target.error.message);r.reject(x)}};v.onupgradeneeded=function(w){var x=w.currentTarget.result;if(x.objectStoreNames&&x.objectStoreNames.contains(n))return;x.createObjectStore(n,{keyPath:"key"})}}if(l)s();function t(v,w){if(p)try{v()}catch(x){w&&w(x)}else r.then(function(){o&&false;t(v,w)},function(x){w&&w(x)})}var u={setItem:function v(w,x,y){this.multiSet([[w,x]],function(z){y(z&&z[0]||null)})},getItem:function v(w,x){this.multiGet([w],function(y,z){var A=z!==undefined&&z[0]!==undefined&&typeof z[0][1]!==undefined?z[0][1]:null;x(y&&y[0]||null,A)})},removeItem:function v(w,x){this.multiRemove([w],function(y){x(y&&y[0]||null)})},multiGet:function v(w,x){var y=[];this._multiOp(w,"readonly",function(z){return x(z,y)},function(z){return z},function(z,A,B){if(A&&z===A.key){o&&false;y.push([z,A.value.value])}else y.push([z,null])})},multiSet:function v(w,x){this._multiOp(w,"readwrite",x,function(y){return y[0]},function(y,z,A){if(z&&y[0]===z.key){var B=z.value;B.value=y[1];o&&false;z.update(B)}else A.push(y)})},multiMerge:function v(w,x){__p&&__p();this._multiOp(w,"readwrite",x,function(y){return y[0]},function(y,z,A){__p&&__p();if(z&&y[0]===z.key){var B=z.value,C=JSON.parse(B.value);i(C,JSON.parse(y[1]),k.Clobber);o&&false;B.value=JSON.stringify(C);z.update(B)}else{o&&false;A.push(y)}})},multiRemove:function v(w,x){this._multiOp(w,"readwrite",x,function(y){return y},function(y,z,A){if(z&&y===z.key){o&&false;z["delete"]()}})},getAllKeys:function v(w){__p&&__p();t(function(){var x=p.transaction([n],"readonly"),y=x.objectStore(n).openCursor(),z=[];y.onsuccess=function(event){var A=event.target.result;if(!A){w(null,z);return}z.push(A.key);A["continue"]()}},function(){return w(null,[])})},clear:function v(w){__p&&__p();t(function(){var x=p.transaction([n],"readwrite"),y=x.objectStore(n).openCursor();y.onsuccess=function(event){var z=event.target.result;if(!z){w(null);return}z["delete"]();z["continue"]()}},function(){return w(null)})},_multiOp:function v(w,x,y,z,A){__p&&__p();t(function(){__p&&__p();var B=false,C=w.slice().sort(function(I,J){var K=z(I),L=z(J);if(K===L){var M=new Error("AsyncStorage._multiOp cannot process duplicate keys.");y&&y([M]);B=true;return 0}return K<L?-1:1});if(B)return;var D=p.transaction([n],x),E=D.objectStore(n).openCursor(),F=[],G=0;E.onsuccess=function(event){__p&&__p();var I=event.target.result;if(!I){while(G<C.length){A(C[G],I,F);G++}H();return}var J=I.key;o&&false;while(z(C[G])<=J){o&&false;A(C[G],I,F);G++;if(G===C.length){H();return}}var K=z(C[G]);I["continue"](K)};function H(){var I=D.objectStore(n);F.forEach(function(J){o&&false;I.add({key:J[0],value:J[1]})})}D.oncomplete=function(){y&&y(null)};D.onerror=function(event){var I=new Error("IndexedDB error: "+event.target.error.message);y&&y([I])};o&&false},function(B){y&&y([B])})}};f.exports=u}),null);
__d("MVideoCacheConfig",["CurrentUser","MVideoDownloadConfig","md5","WebStorage"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=null,l={CACHE_PREFIX:"vc",PREFIX_SEPARATOR:"_",CONFIG_PREFIX:"config",KEYS:{lastCleanUp:"lastCleanUp"},isSupported:function m(){try{if(!k)k=c("WebStorage");return k.getLocalStorage()}catch(n){k=null;return false}},currentAccountHash:function m(){var n=""+h.getAccountID();return j(n)},getUserPrefix:function m(){return l.CACHE_PREFIX+l.PREFIX_SEPARATOR+l.currentAccountHash()+l.PREFIX_SEPARATOR},getCacheConfigKey:function m(){return l.CACHE_PREFIX+l.PREFIX_SEPARATOR+l.CONFIG_PREFIX+l.PREFIX_SEPARATOR+l.currentAccountHash()},initCacheConfig:function m(){var n={},o=Date.now()-2*i.cache_sync_interval_ms;n[l.KEYS.lastCleanUp]=o;n=JSON.stringify(n);var p=l.getCacheConfigKey();k.getLocalStorage().setItem(p,n);return n},getCacheConfig:function m(){var n=l.getCacheConfigKey(),o=k.getLocalStorage().getItem(n);try{JSON.parse(o)}catch(p){o=null}if(o===null)o=l.initCacheConfig();o=JSON.parse(o);return o},getItemFromConfig:function m(n){var o=l.getCacheConfig();return o[n]},setItemFromConfig:function m(n,o){var p=l.getCacheConfig();p[n]=o;p=JSON.stringify(p);var q=l.getCacheConfigKey();k.getLocalStorage().setItem(q,p)}};f.exports=l}),null);
__d("XHRRequestRetrier",["setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j){"use strict";__p&&__p();this.$XHRRequestRetrier1=j;this.$XHRRequestRetrier2=false;this.$XHRRequestRetrier3=0;this.$XHRRequestRetrier4=0;this.$XHRRequestRetrier5=0;this.$XHRRequestRetrier6=1e3;this.$XHRRequestRetrier7=2;this.$XHRRequestRetrier8=.5;this.$XHRRequestRetrier9=j.getErrorHandler();j.setErrorHandler(this.$XHRRequestRetrier11.bind(this));this.$XHRRequestRetrier10=j.getAbortHandler();j.setAbortHandler(this.$XHRRequestRetrier12.bind(this))}i.prototype.setMaxAttempts=function(j){"use strict";this.$XHRRequestRetrier5=j;return this};i.prototype.setBaseRetryDelayMs=function(j){"use strict";this.$XHRRequestRetrier6=j;return this};i.prototype.setRetryBackoffFactor=function(j){"use strict";this.$XHRRequestRetrier7=j;return this};i.prototype.setRetryFuzzFactor=function(j){"use strict";this.$XHRRequestRetrier8=j;return this};i.prototype.send=function(){"use strict";if(this.$XHRRequestRetrier2)return;if(this.$XHRRequestRetrier1.getTimeout())throw new Error("Not supported.");this.$XHRRequestRetrier3++;if(!this.$XHRRequestRetrier4)this.$XHRRequestRetrier4=this.$XHRRequestRetrier6;this.$XHRRequestRetrier1.send()};i.prototype.$XHRRequestRetrier11=function(){"use strict";if(this.$XHRRequestRetrier3<this.$XHRRequestRetrier5)this.$XHRRequestRetrier13();else if(this.$XHRRequestRetrier9)this.$XHRRequestRetrier9.apply(this,arguments)};i.prototype.$XHRRequestRetrier12=function(){"use strict";this.$XHRRequestRetrier2=true;if(this.$XHRRequestRetrier10)this.$XHRRequestRetrier10.apply(this,arguments)};i.prototype.$XHRRequestRetrier13=function(){"use strict";var j=this.send.bind(this),k=Math.random()*2-1,l=k*this.$XHRRequestRetrier8,m=this.$XHRRequestRetrier4*(1+l);h(j,m);this.$XHRRequestRetrier4*=this.$XHRRequestRetrier7};f.exports=i}),null);
__d("URIDownloader",["invariant","URI","XHRRequest","XHRRequestRetrier"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=2e5,m=15,n=2e3,o=1.5;function p(q,r){"use strict";this.$URIDownloader1=new i(q);this.$URIDownloader2=r;this.$URIDownloader3=0;this.$URIDownloader4=0;this.$URIDownloader5=[]}p.prototype.setResponseHandler=function(q){"use strict";!this.$URIDownloader10||h(0);this.$URIDownloader9=q;return this};p.prototype.setChunkedResponseHandler=function(q){"use strict";!this.$URIDownloader9||h(0);this.$URIDownloader10=q;return this};p.prototype.setErrorHandler=function(q){"use strict";this.$URIDownloader11=q;return this};p.prototype.setAbortHandler=function(q){"use strict";this.$URIDownloader12=q;return this};p.prototype.setProgressHandler=function(q){"use strict";this.$URIDownloader13=q;return this};p.prototype.$URIDownloader14=function(q){"use strict";if(this.$URIDownloader8)return;if(this.$URIDownloader13)this.$URIDownloader13({total:this.$URIDownloader2,loaded:this.$URIDownloader4+(q?q:0)})};p.prototype.$URIDownloader15=function(){"use strict";__p&&__p();if(this.$URIDownloader8)return;if(this.$URIDownloader9){var q=null;if(this.$URIDownloader5)q=new Blob(this.$URIDownloader5);this.$URIDownloader9(q)}if(this.$URIDownloader10)this.$URIDownloader10(this.$URIDownloader5)};p.prototype.$URIDownloader16=function(q){"use strict";__p&&__p();if(this.$URIDownloader8)return;if(this.$URIDownloader17(q))if(this.$URIDownloader4<this.$URIDownloader2){this.$URIDownloader14();this.$URIDownloader18()}else this.$URIDownloader15();else this.$URIDownloader19()};p.prototype.$URIDownloader19=function(){"use strict";if(this.$URIDownloader8)return;if(this.$URIDownloader11)this.$URIDownloader11()};p.prototype.$URIDownloader20=function(){"use strict";if(this.$URIDownloader8)return;if(this.$URIDownloader12)this.$URIDownloader12()};p.prototype.$URIDownloader21=function(){"use strict";var q=Math.min(this.$URIDownloader4+l,this.$URIDownloader2);this.$URIDownloader3=q-this.$URIDownloader4};p.prototype.$URIDownloader17=function(q){"use strict";if(this.$URIDownloader8)return false;if(this.$URIDownloader3!==q.size)return false;this.$URIDownloader5.push(q);this.$URIDownloader4+=this.$URIDownloader3;this.$URIDownloader3=0;return true};p.prototype.$URIDownloader18=function(){"use strict";__p&&__p();if(this.$URIDownloader8)return;var q=new j(this.$URIDownloader1).setMethod("GET").setResponseType("blob").setResponseHandler(this.$URIDownloader16.bind(this)).setErrorHandler(this.$URIDownloader19.bind(this)).setAbortHandler(this.$URIDownloader20.bind(this)).setDownloadProgressHandler(function(t){if(t.loadedBytes)this.$URIDownloader14(t.loadedBytes)}.bind(this));this.$URIDownloader21();q.setRequestHeader("Range","bytes="+this.$URIDownloader4+"-"+(this.$URIDownloader4+this.$URIDownloader3-1));this.$URIDownloader7=q;var r=new k(q).setMaxAttempts(m).setBaseRetryDelayMs(n).setRetryBackoffFactor(o);this.$URIDownloader6=r;try{r.send()}catch(s){this.$URIDownloader19()}};p.prototype.sendRequest=function(){"use strict";this.$URIDownloader4=0;this.$URIDownloader18()};p.prototype.abort=function(){"use strict";this.$URIDownloader8=true;if(this.$URIDownloader7&&this.$URIDownloader7.abort)this.$URIDownloader7.abort();else if(this.$URIDownloader12)this.$URIDownloader12();this.$URIDownloader22()};p.prototype.$URIDownloader22=function(){"use strict";this.$URIDownloader7=null;this.$URIDownloader5=null;this.$URIDownloader12=null;this.$URIDownloader11=null;this.$URIDownloader9=null;this.$URIDownloader13=null};f.exports=p}),null);
__d("VideoDownloadDeleteReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CACHE_SYNC:"cache_sync",CONSISTENCY_CHECK:"consistency_check",USER_INITIATED:"user_initiated",CHUNKED_PLAYBACK_NOT_SUPPORTED:"chunked_playback_not_supported"})}),null);
__d("XVideoDownloadEventController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video_download_event/",{video_id:{type:"Int",required:true},viewer_id:{type:"Int",required:true},app_id:{type:"Int",required:true},event:{type:"Enum",required:true,enumType:1}})}),null);
__d("VideoDownloadEventHandler",["CurrentUser","DataAttributeUtils","MRequest","XVideoDownloadEventController"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=412378670482;function m(n,o,event){"use strict";this.$VideoDownloadEventHandler1=n;this.$VideoDownloadEventHandler2=o;this.$VideoDownloadEventHandler3=event}m.prototype.sendServerDownloadEvent=function(){"use strict";var n=k.getURIBuilder().setInt("video_id",this.$VideoDownloadEventHandler1).setInt("viewer_id",h.getAccountID()).setInt("app_id",l).setEnum("event",this.$VideoDownloadEventHandler3).getURI(),o=null;if(this.$VideoDownloadEventHandler2)o=i.getDataFt(this.$VideoDownloadEventHandler2);new j(n).setMethod("POST").setData({ft_data:o}).send()};f.exports=m}),null);
__d("VideoDownloadLogger",["Bootloader","CurrentUser","md5"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=null,l=null,m=2147483647,n="video_download";function o(){return Date.now()}function p(q){"use strict";q=q?q:{};this.$VideoDownloadLogger1=q}p.prototype.$VideoDownloadLogger2=function(event,q){"use strict";q=babelHelpers["extends"]({},q,this.$VideoDownloadLogger1);!event;if(!Object.prototype.hasOwnProperty.call(q,"time_ms"))q.time_ms=o();if(!Object.prototype.hasOwnProperty.call(q,"connectivity_type"))q.connectivity_type=l.getConnectivityType();var r={logData:q,event:event};k.post(n,r)};p.prototype.logEvent=function(event,q){"use strict";if(!k||!l)h.loadModules(["Banzai","MVideoUtils"],function(r,s){k=r;l=s;this.$VideoDownloadLogger2(event,q)}.bind(this),"VideoDownloadLogger");else this.$VideoDownloadLogger2(event,q)};p.time=function(){"use strict";return Math.floor(Date.now()/1e3)};p.generateSessionID=function(){"use strict";return j([i.getID(),p.time(),Math.random()*m].join(":"))};f.exports=p}),null);
__d("VideoDownloadLoggerEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONTROL_IMPRESSION:"control_impression",DOWNLOAD_CANCELLED:"download_cancelled",DOWNLOAD_DELETED:"download_deleted",DOWNLOAD_FAILED:"download_failed",DOWNLOAD_FINISHED:"download_finished",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_REQUESTED:"download_requested",SLOW_PLAYBACK_DETECTED:"slow_playback_detected",SURVEY_URI_REQUESTED:"survey_uri_requested",SURVEY_IMPRESSION_ATTEMPT:"survey_impression_attempt",SURVEY_PROMPT_RESULT:"survey_prompt_result",QUALITY_SELECTED:"quality_selected",QUALITY_SELECTOR_IMPRESSION:"quality_selector_impression",QUALITY_SELECTOR_NO_QUALITIES_AVAILABLE:"quality_selector_no_qualities_available",REQUESTED_PLAYING:"requested_playing",PAGE_SETTING_CHANGE:"page_setting_change"})}),null);
__d("VideoDownloadLoggerFields",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({APP_ID:"app_id",AVAILABLE_QUALITIES:"available_qualities",AVAILABLE_QUALITIES_COUNT:"available_qualities_count",BYTES_DOWNLOADED:"bytes_downloaded",CONFIG_NAME:"config_name",CONNECTIVITY_TYPE:"connectivity_type",DELETE_REASON:"delete_reason",DEVICE_YEAR_CLASS:"device_year_class",DOWNLOAD_ORIGIN:"download_origin",DOWNLOAD_SETTING:"download_setting",ELAPSED_TIME_MS:"elapsed_time_ms",ERROR:"error",ERROR_CODE:"error_code",EVENT_NAME:"event_name",EVENT_ORIGIN:"event_origin",EVENT_SUBORIGIN:"event_suborigin",IS_EMPLOYEE:"is_employee",IS_VISIBLE:"is_visible",OWNER_ID:"owner_id",QUALITY:"quality",REASON:"reason",SAVED_OFFLINE:"saved_offline",SESSION_ID:"session_id",TOTAL_SIZE:"total_size",TIME_MS:"time_ms",VIDEO_ID:"video_id"})}),null);
__d("VideoDownloadReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AUTO_INITIATED:"auto_initiated",USER_INITIATED:"user_initiated"})}),null);
__d("MVideoCache",["VideoDownloadEventHandler","VideoDownloadLogger","VideoDownloadLoggerEvent","VideoDownloadLoggerFields","VideoDownloadDeleteReason","VideoDownloadReason","emptyFunction","MLegacyDataStore","URIDownloader","MVideoCacheConfig","MVideoDownloadConfig","AsyncStorage","WebStorage"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s=null,t=null,u={},v=500,w=4e9,x=0,y={audio:"audio",video:"video"};function z(B,C){"use strict";this.$MVideoCacheStreamObject1=B;this.$MVideoCacheStreamObject2=C;if(B.chunked)this.$MVideoCacheStreamObject3=C===y.video?B.videoChunkCount:B.audioChunkCount;else this.$MVideoCacheStreamObject3=1;this.$MVideoCacheStreamObject4=0}z.prototype.getNextBuffer=function(B){"use strict";if(this.$MVideoCacheStreamObject4>=this.$MVideoCacheStreamObject3)B(null);else{var C=this.$MVideoCacheStreamObject4++;A.getCachedStream(this.$MVideoCacheStreamObject1,this.$MVideoCacheStreamObject2,function(D){B(D)},B,this.$MVideoCacheStreamObject1.chunked?C:null)}};var A={DEFAULT_QUALITY_TAG:"default",DOWNLOAD_STARTED_TIME:"downloadStartedTime",DOWNLOAD_REASON:"downloadReason",OFFLINE_LIFESPAN:"offlineLifespan",VIEW_COUNT:"viewCount",RESOURCE_STATE:{loading:"loading",finished:"finished",error:"error"},ERROR:{QUOTA_EXCEEDED:1,NO_ACCESS:2},isDownloadInProgress:function B(){return!A.isEmptyObject(u)},isSupported:function B(){try{if(!s)s=c("AsyncStorage");if(!t)t=c("WebStorage");return t.getLocalStorage()&&window.indexedDB&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota}catch(C){s=null;t=null;return false}},downloadVideo:function B(C,D,E,F,G,H){__p&&__p();var I=arguments.length<=6||arguments[6]===undefined?{}:arguments[6],J=arguments.length<=7||arguments[7]===undefined?m.USER_INITIATED:arguments[7],K=arguments.length<=8||arguments[8]===undefined?null:arguments[8],L=JSON.parse(D),M=A.createVideoResource(L,H),N=A.createAudioResource(L,H);if(!M&&!N){F();return}var O=[];M&&O.push(M);N&&O.push(N);var P=A.calculateTotalSize(D,H),Q=A.createTracking(C,P,L.offline_lifespan_ms,E,F,G,H,I.origin,J,K);if(!Q){F();return}var R={};R[k.EVENT_ORIGIN]=I.origin;R[k.EVENT_SUBORIGIN]=I.suborigin;A.logEventTracking(Q,j.DOWNLOAD_REQUESTED,R);A.flushAsyncStorage(function S(){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(T,U){var V=A.getTotalSizeOfLoadingResources();if(T+Q.totalSize+V<A.getMaxCacheUsage()&&Q.totalSize+V+A.getMinFreeSpace()<U)A.downloadPostQuotaCheck(Q,M,N);else{var W="Used: "+T+" Remaining: "+U+" MaxCacheUsage: "+A.getMaxCacheUsage()+" MinFreeSpace: "+A.getMinFreeSpace();A.onError(Q,A.ERROR.QUOTA_EXCEEDED,W)}},function(){A.onError(Q,A.ERROR.QUOTA_EXCEEDED)})})},getDownloadNotificationUri:function B(C){var D=JSON.parse(C);return D&&D.download_finished_notification_uri},deleteVideoByID:function B(C,D,E){__p&&__p();var F=arguments.length<=3||arguments[3]===undefined?{}:arguments[3];D=D?D:n;var G=A.getTracking(C),H={};H[k.EVENT_ORIGIN]=F.origin;H[k.EVENT_SUBORIGIN]=F.suborigin;H[k.REASON]=E||l.USER_INITIATED;if(G){A.logEventTracking(G,j.DOWNLOAD_CANCELLED,H);A.deleteTracking(G,true)}else{A.logEvent(C,j.DOWNLOAD_DELETED,H);var I=new h(C,null,j.DOWNLOAD_DELETED);I.sendServerDownloadEvent()}A.deleteCachedVideoFromStorage(C,D)},calculateTotalSize:function B(C,D){var E=JSON.parse(C),F=A.getStreamsForQuality(E,D);return F&&A.calculateTotalSizeInState(F,undefined)},getQualitiesFromResources:function B(C){__p&&__p();var D=JSON.parse(C),E=D&&D.streams;if(!E)return null;var F=null,G={};for(var H=0;H<E.length;H++){var I=E[H],J=String(I.mimetype);if(J&&J.startsWith(y.video)){var K=Object.prototype.hasOwnProperty.call(I,"quality")&&String(I.quality);if(K)G[K]=I.size}else if(J&&J.startsWith(y.audio))F=I}if(F)for(var L in G)if(Object.prototype.hasOwnProperty.call(G,L)&&G[L])G[L]+=F.size;return G},deleteVideosByID:function B(C,D,E){if(A.isSupported())for(var F=0;F<C.length;F++){var G=C[F];A.deleteVideoByID(G,function(){D(G)},E)}},isVideoDownloaded:function B(C){if(A.isSupported()){var D=A.getCachedVideoByID(C);if(D)return true;else return false}return false},isVideoDownloading:function B(C){if(A.isSupported())return u&&u[C];return false},getVideoSize:function B(C,D,E){__p&&__p();if(A.isSupported()){var F=A.getTracking(C);if(F)return F.totalSize;var G=A.getCachedVideoByID(C);if(G)return G.totalSize;if(D){var H=A.calculateTotalSize(D,E);if(H&&H>0)return H}}return null},getVideoProgressByID:function B(C){if(A.isSupported()){var D=A.getTracking(C);if(D)return D.loaded}return 0},_fillMissingFieldsWithDefaults:function B(C,D){__p&&__p();for(var E=0;E<D.length;E++){var F=D[E];if(F===A.DOWNLOAD_STARTED_TIME&&!Object.prototype.hasOwnProperty.call(C,F))C.downloadStartedTime=0;if(F===A.DOWNLOAD_REASON&&!Object.prototype.hasOwnProperty.call(C,F))C.downloadReason=m.USER_INITIATED;if(F===A.OFFLINE_LIFESPAN&&!Object.prototype.hasOwnProperty.call(C,F))C.offlineLifespan=r.cache_default_offline_lifespan_ms}return C},getCachedVideoByID:function B(C){__p&&__p();if(!r.enabled&&!r.simulate_legacy_ux)return null;var D=A.createPrefix(C),E=null;try{E=t.getLocalStorage().getItem(D)}catch(F){}var G=E&&JSON.parse(E);G=G&&A._fillMissingFieldsWithDefaults(G,[A.DOWNLOAD_STARTED_TIME,A.DOWNLOAD_REASON,A.OFFLINE_LIFESPAN]);if(r.simulate_legacy_ux)return null;if(G&&G.chunked&&!r.cache_chunked_playback_enabled){setTimeout(function(){A.deleteVideoByID(C,n,l.CHUNKED_PLAYBACK_NOT_SUPPORTED)},0);return null}return G},getCachedVideosMetadata:function B(){__p&&__p();var C=arguments.length<=0||arguments[0]===undefined?[]:arguments[0],D=arguments.length<=1||arguments[1]===undefined?false:arguments[1],E={};if(!A.isSupported())return E;var F=t.getLocalStorage(),G=Object.keys(F),H=q.getUserPrefix();for(var I in G)if(Object.prototype.hasOwnProperty.call(G,I)&&G[I])if(G[I].startsWith(H)){var J=A.getVideoIDFromStorageKey(G[I]),K={};if(C.length>0){var L=null;try{L=F.getItem(G[I])}catch(M){if(!D)continue}var N=L&&JSON.parse(L);if((!N||N.chunked&&!r.cache_chunked_playback_enabled)&&!D)continue;for(var O=0;O<C.length;O++){var P=C[O];if(N&&P in N)K[P]=N[P]}K=A._fillMissingFieldsWithDefaults(K,C)}E[J]=K}return E},getCachedVideoIDs:function B(){var C=arguments.length<=0||arguments[0]===undefined?false:arguments[0];return Object.keys(A.getCachedVideosMetadata([],C))},hasDownloadedVideos:function B(){var C=A.getCachedVideoIDs();return C&&C.length&&C.length>0},getDownloadingVideos:function B(){var C=Object.keys(u);return C},getVideoIDFromStorageKey:function B(C){var D=q.PREFIX_SEPARATOR;return C.split(D)[2]||""},getCachedVideo:function B(C){var D=o.get(C);return A.getCachedVideoByID(D.videoID)},getCachedVideoStream:function B(C,D,E){A.getCachedStream(C,y.video,D,E)},getCachedAudioStream:function B(C,D,E){A.getCachedStream(C,y.audio,D,E)},getCachedVideoStreamObject:function B(C){return new z(C,y.video)},getCachedAudioStreamObject:function B(C){return new z(C,y.audio)},getMaxCacheUsage:function B(){var C=w;if(r&&Object.prototype.hasOwnProperty.call(r,"max_cache_usage"))C=r.max_cache_usage;return C},getMinFreeSpace:function B(){var C=x;if(r&&Object.prototype.hasOwnProperty.call(r,"min_free_space"))C=r.min_free_space;return C},downloadPostQuotaCheck:function B(C,D,E){if(!A.addTracking(C)){A.onError(C);return}D&&A.sendResourceRequest(C,D);E&&A.sendResourceRequest(C,E)},calculateTotalSizeInState:function B(C,D){var E,F=0,G=C.length;for(E=0;E<G;E++){var H=C[E];if(!D||H.state===D)F+=H.size}return F},isEmptyObject:function B(C){for(var D in C)if(Object.prototype.hasOwnProperty.call(C,D)&&C[D])return false;return true},getTotalSizeOfLoadingResources:function B(){var C=0;for(var D in u)if(Object.prototype.hasOwnProperty.call(u,D)&&u[D]){var E=u[D];C+=A.calculateTotalSizeInState(E.resources,A.RESOURCE_STATE.loading)}return C},deleteCachedVideoFromStorage:function B(C,D){__p&&__p();var E=A.createPrefix(C);try{t.getLocalStorage().removeItem(E)}catch(F){}A.getObjectKeysFromAsyncStorageByPrefix(E,function(G,H){if(G||!H){D();return}try{s.multiRemove(H,function(){D()})}catch(F){D()}})},flushAsyncStorage:function B(C){__p&&__p();var D=A.createPrefix(0),E=["0"],F=new Blob(E,{type:"text/html"});try{s.setItem(D,F,function(){try{s.removeItem(D,function(){C()})}catch(I){C()}})}catch(G){try{s.removeItem(D,function(){C()})}catch(H){C()}}},getObjectKeysFromAsyncStorageByPrefix:function B(C,D){__p&&__p();try{s.getAllKeys(function(F,G){if(F||!G){D(F);return}G=G.filter(function(H){return H.startsWith(C)});D(null,G)})}catch(E){D(E)}},getVideosFromAsyncStorage:function B(C){A.getObjectKeysFromAsyncStorageByPrefix(q.getUserPrefix(),function(D,E){if(D||!E){C(D);return}var F=E.map(A.getVideoIDFromStorageKey),G=F.reduce(function(H,I){H[I]=true;return H},{});C(null,Object.keys(G))})},makeLocalAsyncStorageConsistent:function B(C,D){__p&&__p();var E=A.getCachedVideoIDs(true);A.getVideosFromAsyncStorage(function(F,G){__p&&__p();if(F||!G){C();return}var H={},I=E.concat(G);I.forEach(function(J){if(!H[J])H[J]=1;else H[J]++});H=Object.keys(H).filter(function(J){return H[J]===1});if(H.length>0)A.deleteVideosByID(H,D,l.CONSISTENCY_CHECK);C()})},getCachedStream:function B(C,D,E,F,G){__p&&__p();var H=A.createPrefix(C.videoID,D,G);try{s.getItem(H,function(J,K){if(J){A.deleteVideoByID(C.videoID);F()}else E(K)})}catch(I){A.deleteVideoByID(C.videoID);F()}},saveVideoInLocalStorage:function B(C){var D=C.videoID&&A.createPrefix(C.videoID);try{t.getLocalStorage().setItem(D,JSON.stringify(C))}catch(E){throw E}},saveCachedVideo:function B(C){__p&&__p();var D={};D.downloadStartedTime=C.downloadStartedTime;D.downloadReason=C.downloadReason;D.videoID=C.videoID;D.quality=C.quality;D.audioCodec=A.getResourceCodec(C,y.audio);D.videoCodec=A.getResourceCodec(C,y.video);D.totalSize=C.totalSize;D.offlineLifespan=C.offlineLifespan;D.viewCount=0;D.sessionID=C.sessionID;D.downloadOrigin=C.origin;D.chunked=C.chunked;D.videoChunkCount=C.videoChunkCount;D.audioChunkCount=C.audioChunkCount;A.saveVideoInLocalStorage(D)},logPlaybackRequest:function B(C,D,E){__p&&__p();var F=null;if(D){var G=A.getCachedVideoByID(C),H=G.viewCount||0;G.viewCount=H+1;A.saveVideoInLocalStorage(G)}else F=A.ERROR.NO_ACCESS;var I={};I[k.ERROR_CODE]=F;I[k.REASON]=E;A.logEvent(C,j.REQUESTED_PLAYING,I)},createPrefix:function B(C,D,E){var F=q.getUserPrefix()+C+q.PREFIX_SEPARATOR+A.DEFAULT_QUALITY_TAG;if(D)F=F+q.PREFIX_SEPARATOR+D;if(E!=undefined&&E!=null)F=F+q.PREFIX_SEPARATOR+E;return F},createResource:function B(C,D,E,F){var G={};G.src=C;G.type=D;G.state=A.RESOURCE_STATE.loading;G.codec=E;G.size=F;G.progress=0;return G},getDefaultVideoStream:function B(C){__p&&__p();var D=null;for(var E=0;E<C.length;E++){var F=C[E],G=String(F.mimetype);if(G&&G.startsWith(y.video)){D=F;if(F["default"])return F}}return D},getStreamsForQuality:function B(C,D){__p&&__p();var E=[],F=C&&C.streams,G=false,H=false;for(var I=0;I<F.length;I++){var J=F[I],K=String(J.mimetype);if(K&&K.startsWith(y.video)&&!G){var L=String(J.quality);if(D&&L&&L===D)G=!!E.push(J)}else if(K&&K.startsWith(y.audio)&&!H)H=!!E.push(J)}if(!G){var M=A.getDefaultVideoStream(F);M&&E.push(M)}return E},getUrlInfo:function B(C,D,E){__p&&__p();var F=A.getStreamsForQuality(C,E);if(!F)return null;var G=null;for(var H=0;H<F.length;H++){var I=F[H],J=String(I.mimetype);if(J&&J.startsWith(D)){G=I;break}}return G},createVideoResource:function B(C,D){var E=A.getUrlInfo(C,y.video,D);return E&&A.createResource(E.url,y.video,E.codecs,E.size)},createAudioResource:function B(C,D){var E=A.getUrlInfo(C,y.audio,D);return E&&A.createResource(E.url,y.audio,E.codecs,E.size)},addTracking:function B(C){if(u[C.videoID])return false;u[C.videoID]=C;return true},createTracking:function B(C,D,E,F,G,H,I,J,K,L){__p&&__p();var M={};M.videoID=C;M.quality=I||A.DEFAULT_QUALITY_TAG;M.onDone=F;M.onError=G;M.onProgress=H;M.resources=[];M.deleted=false;M.loaded=0;M.totalSize=D;M.offlineLifespan=E;M.sessionID=i.generateSessionID();M.origin=J;M.logger=A.createLogger(M);M.downloadStartedTime=Date.now();M.chunked=r.cache_chunked_storage_enabled;M.loggingDataCallback=L;M.downloadReason=K;return M},getTracking:function B(C){return u[C]},deleteTracking:function B(C,D){__p&&__p();var E={};E[k.REASON]=C.downloadReason;if(!C.deleted){C.deleted=true;u[C.videoID]=null;if(D){var F;for(F=0;F<C.resources.length;F++)try{C.resources[F].downloader&&C.resources[F].downloader.abort()}catch(G){A.logEventTracking(C,j.DOWNLOAD_FAILED,E)}}}},getResourceCodec:function B(C,D){var E,F,G;G=C.resources.length;for(F=0;F<G;F++){E=C.resources[F];if(E.type===D)return E.codec}return null},updateTracking:function B(C,D,E){__p&&__p();var F,G,H;if(C.deleted)return;if(E)D.state=E;if(D.state===A.RESOURCE_STATE.finished)if(D.type===y.video)C.videoChunkCount=D.chunkCount;else if(D.type===y.audio)C.audioChunkCount=D.chunkCount;if(D.state===A.RESOURCE_STATE.loading)C.resources.push(D);else{var I=A.RESOURCE_STATE.finished;G=C.resources.length;for(F=0;F<G;F++){H=C.resources[F];if(H.state===A.RESOURCE_STATE.loading){I=A.RESOURCE_STATE.loading;break}else if(H.state===A.RESOURCE_STATE.error)I=A.RESOURCE_STATE.error}if(I===A.RESOURCE_STATE.error){A.deleteTracking(C);A.deleteCachedVideoFromStorage(C.videoID,function(){A.onError(C)})}else if(I===A.RESOURCE_STATE.finished)try{A.saveCachedVideo(C);A.deleteTracking(C);A.onDone(C)}catch(J){A.deleteCachedVideoFromStorage(C.videoID,function(){A.onError(C)})}}},trackProgress:function B(C){var D=0;for(var E in C.resources)if(Object.prototype.hasOwnProperty.call(C.resources,E))D+=C.resources[E].progress;C.loaded=D;var F={};F[k.BYTES_DOWNLOADED]=C.loaded;A.logEventTracking(C,j.DOWNLOAD_PROGRESS,F);return D},sendResourceRequest:function B(C,D){__p&&__p();var E=new p(D.src,D.size);if(C.chunked)E.setChunkedResponseHandler(function(F){__p&&__p();try{var G=[];for(var H=0;H<F.length;H++){var I=[],J=A.createPrefix(C.videoID,D.type,H);I.push(J);var K=F[H];I.push(K);G.push(I)}s.multiSet(G,function(M){D.chunkCount=F.length;A.updateTracking(C,D,M?A.RESOURCE_STATE.error:A.RESOURCE_STATE.finished)})}catch(L){A.updateTracking(C,D,A.RESOURCE_STATE.error)}});else E.setResponseHandler(function(F){try{var G=A.createPrefix(C.videoID,D.type);s.setItem(G,F,function(I){A.updateTracking(C,D,I?A.RESOURCE_STATE.error:A.RESOURCE_STATE.finished)})}catch(H){A.updateTracking(C,D,A.RESOURCE_STATE.error)}});E.setErrorHandler(function(){A.updateTracking(C,D,A.RESOURCE_STATE.error)});E.setProgressHandler(function(F){if(F.total){D.progress=F.loaded;C.onProgress(A.trackProgress(C),C.totalSize)}});E.setAbortHandler(function(){setTimeout(function(){A.updateTracking(C,D,A.RESOURCE_STATE.error)},v)});A.updateTracking(C,D);D.downloader=E;E.sendRequest()},createLogger:function B(C){var D={};D[k.DOWNLOAD_ORIGIN]=C.origin;D[k.QUALITY]=C.quality;D[k.SESSION_ID]=C.sessionID;D[k.TOTAL_SIZE]=C.totalSize;D[k.VIDEO_ID]=C.videoID;return new i(D)},getLogger:function B(C){if(!C.logger)return null;return C.logger},logEvent:function B(C,event,D){__p&&__p();var E=new i();D=D||{};D[k.VIDEO_ID]=C;var F=A.getCachedVideoByID(C);if(F){D[k.DOWNLOAD_ORIGIN]=F.downloadOrigin;D[k.SESSION_ID]=F.sessionID;D[k.TOTAL_SIZE]=F.totalSize;D[k.QUALITY]=D[k.QUALITY]?D[k.QUALITY]:F.quality;D[k.SAVED_OFFLINE]=1}E.logEvent(event,D)},logEventTracking:function B(C,event,D){__p&&__p();var E=this.getLogger(C);D=D||{};if(!Object.prototype.hasOwnProperty.call(D,k.REASON))D[k.REASON]=C.downloadReason;if(C.loggingDataCallback){var F=C.loggingDataCallback;D=F(D)}D[k.ELAPSED_TIME_MS]=Date.now()-C.downloadStartedTime;E.logEvent(event,D)},onError:function B(C,D,E){var F={};F[k.ERROR_CODE]=D;F[k.ERROR]=E;A.logEventTracking(C,j.DOWNLOAD_FAILED,F);C.onError(D)},onDone:function B(C){A.logEventTracking(C,j.DOWNLOAD_FINISHED);C.onDone()}};f.exports=A}),null);
__d("MVideoDownloadState",[],(function a(b,c,d,e,f,g){var h={DOWNLOADING:"downloading",DOWNLOADED:"downloaded",DELETING:"deleting",NOTDOWNLOADED:"notdownloaded"};f.exports=h}),null);
__d("MVideoDownloadStateHandler",["MVideoDownloadState","MVideoCache"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=null;function k(){"use strict";this.$MVideoDownloadStateHandler1={};this.$MVideoDownloadStateHandler2={}}k.prototype.addListener=function(l,m){"use strict";if(!this.$MVideoDownloadStateHandler1[l])this.$MVideoDownloadStateHandler1[l]=[];this.$MVideoDownloadStateHandler1[l].push(m)};k.removeListeners=function(l){"use strict";if(this.$MVideoDownloadStateHandler3().$MVideoDownloadStateHandler1[l])this.$MVideoDownloadStateHandler3().$MVideoDownloadStateHandler1[l]=[]};k.prototype.setState=function(l,m){"use strict";l.forEach(function(n){this.$MVideoDownloadStateHandler2[n]=m;if(!this.$MVideoDownloadStateHandler1[n])return;var o=this.$MVideoDownloadStateHandler1[n];o.forEach(function(p){try{p.call(window,m)}catch(q){}})},this)};k.prototype.getState=function(l){"use strict";return this.$MVideoDownloadStateHandler2[l]};k.$MVideoDownloadStateHandler3=function(){"use strict";if(!j)j=new k();return j};k.listen=function(l,m){"use strict";this.$MVideoDownloadStateHandler3().addListener(l,m);this.initializeState(l)};k.initializeState=function(l){"use strict";if(i.isVideoDownloaded(l))k.downloaded([l]);else if(i.isVideoDownloading(l))k.downloading([l],i.getVideoProgressByID(l),i.getVideoSize(l));else k.deleted([l])};k.getState=function(l){"use strict";return this.$MVideoDownloadStateHandler3().getState(l)};k.downloading=function(l,m,n){"use strict";this.$MVideoDownloadStateHandler3().setState(l,{state:h.DOWNLOADING,loaded:m,total:n})};k.downloaded=function(l){"use strict";this.$MVideoDownloadStateHandler3().setState(l,{state:h.DOWNLOADED})};k.cleanup=function(l){"use strict";this.$MVideoDownloadStateHandler3().setState(l,{state:h.DELETING})};k.deleted=function(l,m){"use strict";this.$MVideoDownloadStateHandler3().setState(l,{state:h.NOTDOWNLOADED,errorMessage:m})};f.exports=k}),null);
__d("XVideoCacheCleanUpController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video_cache_cleanup/",{video_ids:{type:"StringVector",required:true}})}),null);
__d("MVideoCacheCleanUp",["MVideoCache","MVideoCacheConfig","MVideoDownloadStateHandler","MRequest","XVideoCacheCleanUpController","MVideoDownloadConfig","setTimeoutAcrossTransitions","VideoDownloadReason","VideoDownloadDeleteReason"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=1e4,r=null,s={clean:function t(){__p&&__p();s.deleteExpiredVideos();r=null;var u=h.getCachedVideoIDs(true);if(u.length==0){s.setLastCleanUpDate();return}var v=l.getURIBuilder().setStringVector("video_ids",u).getURI(),w=new k(v);w.setMethod("POST");w.listen("done",function(x){var y=x.payload||{};if(!y.error){s.setLastCleanUpDate();var z=[].concat(y.offlineDisabled,y.unaccessible,y.unsaved);if(z.length>0)s.deleteVideosByID(z)}});w.send()},deleteExpiredVideos:function t(){var u=h.getCachedVideosMetadata([h.DOWNLOAD_STARTED_TIME,h.DOWNLOAD_REASON,h.OFFLINE_LIFESPAN]),v=[],w=Date.now(),x=w-m.cache_auto_downloaded_videos_caching_interval_ms;for(var y in u){var z=u[y];if(z.downloadReason===o.AUTO_INITIATED&&z.downloadStartedTime<x||z.downloadStartedTime<w-z.offlineLifespan)v.push(y)}if(v.length>0)s.deleteVideosByID(v)},deleteVideosByID:function t(u){h.deleteVideosByID(u,function(v){j.deleted([v])},p.CACHE_SYNC)},requestCleanUp:function t(){if(i.isSupported()&&h.isSupported()){var u=s.getLastCleanUpDate(),v=Date.now()-m.cache_sync_interval_ms,w=u<v;if(w&&!r)r=n(function(){h.makeLocalAsyncStorageConsistent(s.clean,function(x){j.deleted([x])})},q)}},getLastCleanUpDate:function t(){if(i.isSupported())return i.getItemFromConfig(i.KEYS.lastCleanUp);else return 0},setLastCleanUpDate:function t(){if(i.isSupported()){var u=Date.now();i.setItemFromConfig(i.KEYS.lastCleanUp,u)}},checkAccess:function t(u){var v=u.downloadStartedTime,w=s.getLastCleanUpDate(),x=Math.max(v,w),y=Date.now();s.requestCleanUp();var z=x+m.allowed_offline_access_interval_ms,A=z>y;return A}};f.exports=s}),null);
__d("MVideoMediaSourceState",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$MVideoMediaSourceState2=false;this.$MVideoMediaSourceState1=false;this.$MVideoMediaSourceState3=i}h.prototype.getMediaSource=function(){"use strict";return this.$MVideoMediaSourceState3};h.prototype.videoStreamEnded=function(){"use strict";this.$MVideoMediaSourceState2=true;this.$MVideoMediaSourceState4()};h.prototype.audioStreamEnded=function(){"use strict";this.$MVideoMediaSourceState1=true;this.$MVideoMediaSourceState4()};h.prototype.$MVideoMediaSourceState4=function(){"use strict";if(this.$MVideoMediaSourceState1&&this.$MVideoMediaSourceState2)this.$MVideoMediaSourceState3.endOfStream()};f.exports=h}),null);
__d("MVideoPlayerVisibilityBehavior",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IGNORE_VISIBILITY:"0",PAUSE_IF_MUTED:"1",PAUSE:"2"})}),null);
__d("VideoViewabilityPercentage",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OFFSCREEN:-2,VIEWABLE_UNKNOWN:-1,VIEWABLE_0:0,VIEWABLE_25:25,VIEWABLE_50:50,VIEWABLE_75:75,VIEWABLE_100:100})}),null);
__d("MVideoViewability",["MFullScreen","VideoViewabilityPercentage","getElementPosition","getViewportDimensions"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l={shouldLog:function m(n){return!!n&&n.videoViewabilityLoggingEnabled&&n.videoViewabilityLoggingPollingRate>0},calculateViewabilityPercentage:function m(n){__p&&__p();if(h.isFullScreen())return i.VIEWABLE_100;if(!document.hasFocus())return i.OFFSCREEN;var o=l.calculateViewabilityPercentageNumber(j(n));if(o===0)return i.OFFSCREEN;else if(o<25)return i.VIEWABLE_0;else if(o<50)return i.VIEWABLE_25;else if(o<75)return i.VIEWABLE_50;else if(o<100)return i.VIEWABLE_75;else return i.VIEWABLE_100},calculateViewabilityPercentageNumber:function m(n){var o=k().width,p=k().height;if(n.width===0||n.height===0)return 0;var q=n.x,r=n.x+n.width,s=n.y,t=n.y+n.height;if(r<=0||q>=o||t<=0||s>=p)return 0;var u=Math.min(r,o)-Math.max(q,0),v=Math.min(t,p)-Math.max(s,0);return u*v*100/(n.width*n.height)}};f.exports=l}),null);
__d("VideoPlayerLoggerEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AUTOPLAY_PREFERENCE_CHANGED:"autoplay_preference_changed",END_STALL_TIME:"end_stall_time",AUTOPLAY_PREFERENCE_STATUS:"autoplay_preference_status",ERROR_ALERT_SHOWN:"video_error_alert_shown",COMMERCIAL_BREAK_OFFSCREEN:"commercial_break_offscreen",COMMERCIAL_BREAK_ONSCREEN:"commercial_break_onscreen",NOT_AUTOPLAYING:"not_autoplaying",VIDEO_CHANNEL_NO_RELATED_VIDEO:"video_channel_no_related_video",VIDEO_ORIENTATION_CHANGED:"video_orientation_changed",AD_BREAK_STARTING_INDICATOR:"ad_break_starting_indicator",ASSETS_LOADED:"assets_loaded",BUFFERED:"buffered",CANCELLED_REQUESTED_PLAYING:"cancelled_requested_playing",CAPTION_CHANGE:"caption_change",CAROUSEL_CHANGE:"carousel_change",CHROMECAST_AVAILABILITY_CHECKED:"chromecast_availabilty_checked",CHROMECAST_CAST_CLICKED:"chromecast_button_clicked",CHROMECAST_CAST_CONNECTED:"chromecast_connected",CHROMECAST_CAST_DISABLED:"chromecast_button_disabled",CHROMECAST_CAST_DISCONNECTED:"chromecast_disconnected",CHROMECAST_CAST_RECONNECTED:"chromecast_reconnected",CHROMECAST_CAST_VISIBLE:"chromecast_button_visible",CHROMECAST_NOT_SUPPORTED:"chromecast_not_supported",CLICK:"click",DISPLAYED:"displayed",ENTERED_FALLBACK:"entered_fallback",ENTERED_FS:"entered_fs",ENTERED_HD:"entered_hd",ERROR:"error",EXITED_FS:"exited_fs",EXITED_HD:"exited_hd",FINISHED_LOADING:"finished_loading",FINISHED_PLAYING:"finished_playing",HEADSET_CONNECTED:"headset_connected",HEADSET_DISCONNECTED:"headset_disconnected",HEART_BEAT:"heart_beat",HOST_ERROR:"host_error",HTTP_STATUS_UPDATE:"http_status_update",IMPRESSION:"impression",INLINE_CLICK_TO_PLAY:"inline_click_to_play",INVALID_URL:"invalid_url",MUTED:"muted",NO_SURFACE_UPDATE:"no_surface_update",PAUSED:"paused",PLAY_REQUESTED:"play_requested",PLAY_REQUESTED_OOB:"play_requested_oob",PLAYER_ALLOCATED:"player_allocated",PLAYER_FORMAT_CHANGED:"player_format_changed",PLAYER_LOADED:"player_loaded",PLAYING_LIVE_STARTED:"playing_live_started",PLAYING_LIVE_STOPPED:"playing_live_stopped",POP_FAILOVER:"pop_failover",PROGRESS:"progress",QUALITY_CHANGE:"quality_change",READY_TO_PLAY:"ready_to_play",REPLAYED:"replayed",REPRESENTATION_ENDED:"representation_ended",REPRESENTATION_FIRST_ENDED:"representation_first_ended",REQUESTED:"requested",REQUESTED_PLAYING:"requested_playing",SCRUBBED:"scrubbed",SPLASH_DISPLAYED:"splash_displayed",STALE:"stale",STARTED_PLAYING:"started_playing",STARTED_RECEIVING_BYTES:"started_receiving_bytes",STOPPED_PLAYING:"stopped_playing",STREAM_RESET:"stream_reset",SURFACE_UPDATED:"surface_updated",SWITCHED_IMPLEMENTATION:"switched_implementation",UNMUTED:"unmuted",UNPAUSED:"unpaused",VIDEO_CHAINING_IMPRESSION:"video_chaining_impression",VIDEO_CHAINING_TAP:"video_chaining_tap",VIDEO_CLICKED_WITHIN_PLAYER:"video_clicked_within_player",VIDEO_PLAYER_SERVICE_DISCONNECTED:"video_player_service_disconnected",VIDEO_PLAYER_SERVICE_RECONNECTED:"video_player_service_reconnected",VIDEO_PLAYER_SERVICE_UNAVAILABLE:"video_player_service_unavailable",VIDEO_PLAYING:"video_playing",VIDEO_SKIP_AD:"video_skip_ad",VOLUME_CHANGED:"volume_changed",VOLUME_DECREASE:"volume_decrease",VOLUME_INCREASE:"volume_increase",WATCH_AND_SCROLL_CHANNEL_ENTERED:"watch_and_scroll_channel_entered",WATCH_AND_SCROLL_EXITED:"watch_and_scroll_exited",WATCH_AND_SCROLL_ICON_HIGHLIGHTED:"watch_and_scroll_icon_highlighted",WATCH_AND_SCROLL_ICON_UNHIGHLIGHTED:"watch_and_scroll_icon_unhighlighted",WATCH_AND_SCROLL_PAUSED:"watch_and_scroll_paused",LIVE_SEGMENT_LOAD_ERROR:"live_segment_load_error",MANIFEST_DATA_TYPE_ERROR:"manifest_data_type_error",MANIFEST_LOAD_ERROR:"manifest_load_error",PLAYER_WARNING:"player_warning",PLAYHEAD_FELL_BEHIND_ERROR:"playhead_fell_behind_error",STREAM_SEGMENT_LOAD_ERROR:"stream_segment_load_error",UNEXPECTED_SEGMENT_ERROR:"unexpected_segment_error",NETWORK_TIMEOUT:"network_timeout",VIDEO_LOGGING_SESSION_TIMEOUT:"video_logging_session_timeout",COMPLETION:"completion",VIEW:"view",PLAYED_FOR_THREE_SECONDS:"played_for_three_seconds",GUIDE_ENTERED:"guide_entered",GUIDE_EXITED:"guide_exited",HEADING_RESET:"heading_reset",SPHERICAL_FALLBACK_ENTERED:"spherical_fallback_entered",SPHERICAL_VIDEO_FALLBACK_CTA_CLICKED:"spherical_video_fallback_cta_clicked",VIEWPORT_ROTATED:"viewport_rotated",VIEWPORT_ZOOMED:"viewport_zoomed",BANZAI_OAUTH_GK_ERROR:"banzai_oauth_gk_error",BANZAI_OAUTH_PARSE_ERROR:"banzai_oauth_parse_error",BANZAI_OAUTH_SESSION_ERROR:"banzai_oauth_session_error",VIEWABILITY_CHANGED:"viewability_changed"})}),null);
__d("VideoPlayerReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AUTOPLAY:"autoplay_initiated",COMMERCIAL_BREAK:"commercial_break",CONNECTION:"host-connection-error",EMBEDDED_VIDEO_API:"embedded_video_api_initiated",FALLBACK_MODE:"fallback_mode",HOVER:"hover",LOOP:"loop_initiated",NETWORK_INTERRUPTED:"network_interrupted",NETWORK_RESUMED:"network_resumed",PAGE_VISIBILITY:"page_visibility_initiated",SEEK:"seek_initiated",SPHERICAL_FALLBACK:"spherical_fallback",SPHERICAL_SWITCH_CANVAS:"spherical_switch_canvas",UNLOADED:"unloaded",USER:"user_initiated",VIDEO_DATA_REPLACED:"video_data_replaced",VIDEO_DATA_SWITCH:"video_data_switch",VIDEO_VISIBILITY:"video_visibility_initiated",VOD_NOT_READY:"vod_not_ready",WARNING_SCREEN_COVER:"warning_screen_cover"})}),null);
__d("showVideoUnavailableDialog",["MCustomDialog","fbt"],(function a(b,c,d,e,f,g,h,i){function j(){var k=i._("Les vid\u00e9os ne sont plus disponibles"),l=i._("Veuillez vous connecter \u00e0 Internet et r\u00e9essayer."),m=i._("OK");h.show({titleString:k,descriptionString:l,dismissButtonString:m})}f.exports=j}),null);
__d("MInlineVideo",["BanzaiODS","Bootloader","CSS","DOM","MFullScreen","MInlineVideoDebugger","MInlineVideoUnit","MLegacyDataStore","MStopNGo","MVideoCache","MVideoCacheCleanUp","MVideoDownloadConfig","MVideoExperiments","MVideoMediaSourceState","MVideoPlayerVisibilityBehavior","MVideoUtils","MVideoViewability","MVideoViewabilityLogging","MViewport","Stratcom","SubscriptionsHandler","VideoPlayerLoggerEvent","VideoPlayerReason","emptyFunction","getElementPosition","isNodeWithinRect","showVideoUnavailableDialog","throttle"],(function aa(ba,ca,da,ea,fa,a,ga,b,c,d,e,ha,ia,f,ja,g,ka,la,h,ma,i,j,na,oa,k,l,m,pa,n,o,qa,ra,sa,p){__p&&__p();var q,r,s,t=false,ta=false,u=n.USER,v=j.PLAYER_STATE.paused,w=null,x=false,y=null,z=null,A=false,B,C=null,D,E,F=null,G=false,H=null,I={playRequest:Function,registerPlayRequest:function Q(R){this.playRequest=R},onComponentReady:function Q(){if(E&&F&&this.playRequest)this.playRequest()}},ua=1e3/15;function va(Q){x=Q;if(ta)return;l.listen("click",j.PLAY_SIGIL,Ha);l.listen("m:page:unload",null,J);l.listen(["m:jewel:flyout:open","m:popup:show","m:side-area:show"],null,Ba);ta=true}function wa(){if(q&&q.getAttribute("playInFullScreen")==="true"&&!e.isFullScreen()&&!t){J();e.removeFullScreenEventListeners(window,wa)}}function xa(Q){if(x)l.invoke("m:video:player:fullscreenchange",null,{videoElement:Q,player:q})}function ya(Q){if(!Q)Q=r;return q&&q.parentNode===Q&&!t}function za(){__p&&__p();var Q=f.get(s);H=Q.defaultQuality;var R=Q.effectiveSrc,S=Q.type;if(Array.isArray(R)&&(S!=="video"||R.length===1))R=R[0];if(S==="video"&&Array.isArray(R))R.forEach(function(T){q.appendChild(d.create("source",T))});else if(R)q.setAttribute("src",R);if(S==="video")q.load()}function Aa(Q){if(Q){Q.setAttribute("src","");Q.load&&Q.load()}}function J(){__p&&__p();var Q=null;if(!q||!q.parentNode)return;if(h.logPauseBeforeDestroyingPlayer){var R=w;R.logPauseEvent()}if(F){F.unload();F=null}if(x)Ta(s,true);if(E){E.unload();E=null}d.remove(q);while(q.hasChildNodes())q.removeChild(q.lastChild);q.removeAttribute("src");if(f.get(s).type==="video"&&q){q.pause();if(x)l.invoke("m:video:player:destroy",null,{videoElement:s,player:q});Q=q;q=null}c.conditionClass(s,j.SHOWN_CLASS,false);t=false;s=null;r=null;if(D){D&&D.release();D=null}if(B){B.release();B=null}window.removeEventListener("focus",Ma);window.removeEventListener("blur",La);if(y){y.releaseListeners();y=null}if(A){z.cleanUp();z=null;A=false}if(h.enablePlayerStateCleanup&&Q)Aa(Q);Q=null}function Ba(){if(!ya())return;if(f.get(s).type!=="video")J();else if(q){q.pause();c.conditionClass(s,j.SHOWN_CLASS,false);t=true}}function K(){return u}function Ca(Q){var R=f.get(s),S=R.type,T=document.getElementById(j.PLAYER_ID[S]),U=h.enableSphericalVideo&&R.spherical,V=h.msite_video_full_width;if(!T)T=j.createNodeFromTag(S,U||R.disableVideoControls,Q,V);if(h.msite_remove_context_menu&&T.addEventListener)T.addEventListener("contextmenu",function(W){W.preventDefault()},false);return T}function L(Q){v=Q;if(A)z.updatePlayerStateDebugger(v)}function Da(Q){var R=j.PLAYER_STATE.paused;if(!Q||Q===s)R=v;return R}function Ea(){return s}function M(Q){if(!q||!q.parentNode)return;O(Q);L(j.PLAYER_STATE.paused);q.pause()}function N(Q){if(!q||!q.parentNode)return;O(Q);L(j.PLAYER_STATE.playing);j.play(q)}function O(Q){u=Q;if(A)z.updateLastActionReasonDebugger(u)}function Fa(Q,R){__p&&__p();var S=null,T=null;if(R.videoCodec){S=Q.getMediaSource().addSourceBuffer('video/mp4; codecs="'+R.videoCodec+'"');S.addEventListener("updateend",function(){Q.videoStreamEnded()},false)}else Q.videoStreamEnded();if(R.audioCodec){T=Q.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+R.audioCodec+'"');T.addEventListener("updateend",function(){Q.audioStreamEnded()},false)}else Q.audioStreamEnded();if(R.videoCodec)g.getCachedVideoStream(R,function(U){var V=new FileReader();V.addEventListener("loadend",function(){S.appendBuffer(V.result)});V.readAsArrayBuffer(U)},o);if(R.audioCodec)g.getCachedAudioStream(R,function(U){var V=new FileReader();V.addEventListener("loadend",function(){T.appendBuffer(V.result)});V.readAsArrayBuffer(U)},o)}function Ga(Q,R){__p&&__p();var S=null,T=null,U=null,V=null,W=function W(X,Y,Z){Y.getNextBuffer(function(bb){if(bb){var $=new FileReader();$.addEventListener("loadend",function(){X.appendBuffer($.result)});$.readAsArrayBuffer(bb)}else Z()})};if(R.videoCodec){U=g.getCachedVideoStreamObject(R);S=Q.getMediaSource().addSourceBuffer('video/mp4; codecs="'+R.videoCodec+'"');S.addEventListener("updateend",function(){W(S,U,function(){Q.videoStreamEnded()})},false)}else Q.videoStreamEnded();if(R.audioCodec){V=g.getCachedAudioStreamObject(R);T=Q.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+R.audioCodec+'"');T.addEventListener("updateend",function(){W(T,V,function(){Q.audioStreamEnded()})},false)}else Q.audioStreamEnded();if(R.videoCodec)W(S,U,function(){Q.videoStreamEnded()});if(R.audioCodec)W(T,V,function(){Q.audioStreamEnded()})}function Ha(Q,R,S,T,U){Ia(Q,R,S,T,U)}function Ia(Q,R,S,T,U){__p&&__p();if(!R)R=Q.getNode(j.INSERTION_POINT_SIGIL);T=T||n.USER;var V=f.get(R),W=g.isVideoDownloading(V.videoID);if(W)return;if(ya(R))return;if(Q)Q.prevent();V.effectiveSrc=V.src;var X=g.isSupported()&&V.canUseOffline&&g.getCachedVideoByID(V.videoID);if(X){var Y=X&&ka.checkAccess(X);g.logPlaybackRequest(V.videoID,Y,T);if(!Y){sa();return}else{var Z=new ma(new MediaSource());Z.getMediaSource().addEventListener("sourceopen",function(){if(la.cache_chunked_playback_enabled)Ga(Z,X);else Fa(Z,X)},false);V.effectiveSrc=window.URL.createObjectURL(Z.getMediaSource())}}V.muted=V.playMuted!=null?V.playMuted:!!S;Ja(Q,R,V,T,U)}function Ja(Q,R,S,T,U){__p&&__p();var V;if(!t){if(x)l.invoke("m:video:player:prepare",null,{videoElement:R,player:q});J();s=R;q=Ca(U);if(q!==U){j.setAttributes(q,S);za();Aa(U)}if(w){w.release();w=null}if(S.videoID)w=new ia(S,q,T,j.getStoryNodeForVideoNode(s));d.prependContent(s,q)}c.conditionClass(s,j.SHOWN_CLASS,true);t=false;G=S.spherical;j.setVideoDimensions(S,q);j.setSubtitles(S,q);if(S.playOnClick&&S.type==="video"){if(S.spherical)I.registerPlayRequest(function(){return N(T)});else N(T);if(S.playInFullScreen&&e.isSupported()){e.listenForFullScreenEvent(window,wa);e.enableFullScreen(q);if(h.enableVideoExitFullScreenOnEnd)q.addEventListener("ended",e.disableFullScreen)}}c.conditionClass(s,j.LOADING_CLASS,true);c.conditionClass(s,j.SPHERICAL_CLASS,G);Ka(s,S,q);if(!E&&h.enableSphericalVideo&&G)(function(){var W={toggleQuality:Pa,getCurrentVideoQuality:function X(){return H}};b.loadModules(["MEmbeddedVideoControls"],function(X){E=new X(q,s,W);I.onComponentReady()},"MInlineVideo")})();if(Q)j.handleLoggingOnPlay(Q,w,S);if(S.videoDebuggerEnabled){A=true;z=new ha(s,S);z.updateLastActionReasonDebugger(u)}if(na.shouldLog(S))y=new oa(q,s,w,S.videoViewabilityLoggingPollingRate,z)}function Ka(Q,R,S){__p&&__p();var T=500;if(R.videoScrollUseLowThrottleRate)T=200;if(!B)B=new m();B.addSubscriptions(d.listen(q,"pause",null,function(){return Ta(Q)}),d.listen(q,"play",null,function(){return Ra(Q)}));if(R.videoPlayerVisibilityBehavior&&R.videoPlayerVisibilityBehavior!==i.IGNORE_VISIBILITY)B.addSubscriptions(l.listen("scroll",null,p(function(){return Sa(Q,R,S)},T)));if(R.videoPlayerPauseWhenBlur){window.addEventListener("focus",Ma);window.addEventListener("blur",La)}if(G&&h.enableSphericalVideo)B.addSubscriptions(d.listen(q,"loadedmetadata",null,function(){return Oa(R)}));if(R.playStartSec&&R.playStartSec>0)B.addSubscriptions(d.listen(q,"loadedmetadata",null,function(){return Xa(R)}));if(R.playEndSec!=null)B.addSubscriptions(d.listen(q,"timeupdate",null,p.withBlocking(Ya.bind(null,R),ua)));if(R.loop&&(R.playStartSec||R.playEndSec))B.addSubscriptions(d.listen(q,"timeupdate",null,p.withBlocking(Za.bind(null,R),ua)));if(x){B.addSubscriptions(d.listen(q,"playing",null,function(){return Ua(Q)}));B.addSubscriptions(d.listen(q,"ended",null,function(){return Va(Q)}));B.addSubscriptions(d.listen(q,"volumechange",null,function(){return Wa(Q)}));if(e.isSupported()){if(C)e.removeFullScreenEventListeners(window,C);C=function C(){return xa(Q)};e.listenForFullScreenEvent(window,C)}}if(Q.readyState>=Q.HAVE_FUTURE_DATA)P();else B.addSubscriptions(d.listen(q,"canplay",null,P));if(R.animatedGifVideo&&!D){D=new m();D.addSubscriptions(ja.listen("go",ab))}if(R.animatedGifVideo||R.loop)q.setAttribute("loop",true)}function La(){if(v===j.PLAYER_STATE.playing)M(n.PAGE_VISIBILITY)}function Ma(){if(v===j.PLAYER_STATE.paused&&u===n.PAGE_VISIBILITY)N(n.USER)}function Na(event,Q){if(w){var R={video_quality:H};if(Q)Object.assign(Q,R);w.logEvent(event,Q)}}function Oa(Q){if(!G||F)return;G=false;var R=Q.sphericalParams,S={projectionType:R.projection,initialHeading:R.initialYaw,initialPitch:R.initialPitch,fieldOfView:R.initialFieldOfView,expansionCoef:1.01},T={disableTouchControls:R.disableSphericalTouchControls},U={videoID:Q.videoID,logEvent:Na,viewportConfig:T};b.loadModules(["MVideoPlayerHTML5Spherical"],function(V){F=new V(q,S,U);I.onComponentReady()},"MInlineVideo")}function Pa(){__p&&__p();var Q=f.get(s),R=g.isSupported()&&g.getCachedVideoByID(Q.videoID);if(R)return;var S=Q.availableQualities;if(!S)return;var T;for(var U in S)if(Object.prototype.hasOwnProperty.call(S,U)&&U!==H){T=U;break}if(!T)return;H=T;Qa(S[T])}function Qa(Q){if(q.tagName!=="VIDEO")return;q.pause();var R=q.currentTime;q.setAttribute("src",Q);q.currentTime=R;q.load();q.play()}function Ra(Q){if(h.enableVideoPlayRequestedLog)Na(pa.REQUESTED_PLAYING,null);if(x)l.invoke("m:video:player:play",null,{videoElement:Q,player:q});L(j.PLAYER_STATE.playing);c.conditionClass(s,j.SHOW_PAUSE_CLASS,false)}function Sa(Q,R,S){var T=e.isFullScreen()||j.isVisible(qa(Q));if(!T&&v===j.PLAYER_STATE.playing&&(R.videoPlayerVisibilityBehavior===i.PAUSE&&K()!==n.AUTOPLAY||R.videoPlayerVisibilityBehavior===i.PAUSE_IF_MUTED&&(S.muted||S.volume===0)))M(n.VIDEO_VISIBILITY);else if(T&&v===j.PLAYER_STATE.paused&&K()===n.VIDEO_VISIBILITY)N(n.VIDEO_VISIBILITY)}function Ta(Q,R){if(x)l.invoke("m:video:player:pause",null,{videoElement:Q,player:q,destroyed:R});L(j.PLAYER_STATE.paused);c.conditionClass(s,j.SHOW_PAUSE_CLASS,true);P()}function Ua(Q){if(x)l.invoke("m:video:player:playing",null,{videoElement:Q,player:q})}function Va(Q){if(x)l.invoke("m:video:player:ended",null,{videoElement:Q,player:q})}function Wa(Q){if(x)l.invoke("m:video:player:volumechange",null,{videoElement:Q,player:q})}function Xa(Q){if(Q.playStartSec>0)q.currentTime=Q.playStartSec}function Ya(Q,R){if(q.currentTime>Q.playEndSec&&!Q.loop){q.pause();L(j.PLAYER_STATE.paused)}}function Za(Q,R){if(Q.playEndSec&&q.currentTime>Q.playEndSec||Q.playStartSec&&q.currentTime==0)q.currentTime=Q.playStartSec}function P(){c.conditionClass(s,j.LOADING_CLASS,false)}function $a(){var Q=k.getHeight(),R=k.getWidth(),S=k.getBoundingRect();return{bottom:Q,height:Q,left:S.left,top:0,right:S.left+R,width:R}}function ab(){__p&&__p();var Q=$a(),R=ra(s,Q);if(R&&v==j.PLAYER_STATE.paused){q.play();L(j.PLAYER_STATE.playing);q.setAttribute("loop",true)}else if(!R&&v==j.PLAYER_STATE.playing){q.pause();L(j.PLAYER_STATE.paused);q.setAttribute("loop",false)}}a.getLastActionReason=K;a.getPlayerState=Da;a.getPlayerDOMVideoElement=Ea;a.pause=M;a.play=N;a.removePlayer=J;a.setLastActionReason=O;a.setupListeners=va;a.showPlayer=Ia}),null);
__d("dangerouslyOverrideMediaElementEndedProperty",[],(function a(b,c,d,e,f,g){function h(){var i=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];i.dangerouslyOverrideMediaElementEndedProperty=true;return i}h.isEnded=function(event){return!!(event&&event.detail&&event.detail.dangerouslyOverrideMediaElementEndedProperty)};f.exports=h}),null);
__d("HTMLMediaElementReadyStates",[],(function a(b,c,d,e,f,g){var h={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};f.exports=h}),null);
__d("getHTMLMediaElementMutedState",["HTMLMediaElementReadyStates"],(function a(b,c,d,e,f,g,h){function i(j){if(j.readyState>=h.HAVE_METADATA)return j.muted;else return j.hasAttribute("muted")||j.muted}f.exports=i}),null);
__d("HVideoPlayerMixin",["EventListener","UserAgent","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerLoggerEvent","dangerouslyOverrideMediaElementEndedProperty","getHTMLMediaElementMutedState"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=-1,p=!!(window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart);function q(s,event){__p&&__p();s.time_ms=Date.now();var t=event.timeStamp;if(t&&p){var u=Math.floor(t).toString().length,v=Date.now().toString().length,w=window.performance.now();if(u===v+3){t=Math.floor(t/1e3);s.time_ms=t}else if(u===v)s.time_ms=t;else if(t<=w){var x=window.performance.timing.navigationStart;s.time_ms=x+Math.floor(t)}}return s}var r={initLogger:function s(t,u){__p&&__p();this._loggedEvents={};this._logFunction=t;this._useEventTime=u;var v=this.getVideoElement();this._lastStartTimePosition=o;this._muted=n(v);this._pausedPosition=o;this._seeking=false;this._seekSourceTimePosition=o;this._volume=v.volume;this._logNextPlayingEvent=true;this._lastPlayedTime=o;var w=false;if(v.readyState>=v.HAVE_FUTURE_DATA)this._logReadyToPlay();else w=true;if(this.skipSubscriptions())return;var x=this.getSubscriptions();if(w)x.addSubscriptions(h.listen(v,"canplay",this._logReadyToPlay.bind(this)));x.addSubscriptions(h.listen(v,"ended",this.onEnded.bind(this)),h.listen(v,"pause",this.onPause.bind(this)),h.listen(v,"playing",this.onPlaying.bind(this)),h.listen(v,"seeked",this.onSeeked.bind(this)),h.listen(v,"seeking",this.onSeeking.bind(this)),h.listen(v,"play",this.onPlay.bind(this)),h.listen(v,"loadedmetadata",this.onLoadedMetadata.bind(this)),h.listen(v,"timeupdate",this.onTimeUpdate.bind(this)),h.listen(v,"volumechange",this.onVolumeChange.bind(this)))},skipSubscriptions:function s(){return false},onCanPlay:function s(t){this._logReadyToPlay(t)},onPlay:function s(t){this._logNextPlayingEvent=true;this._ignoreNextPlaying=false;this._pendingPlayRequest=true},logHeartbeat:function s(){if(k.heartbeatUpdateWatchTime){this._logEvent(l.HEART_BEAT,this._getWatchTimeClosingLogData({}));var t=this._getVideoCurrentTime();this._lastStartTimePosition=t;this._lastPlayedTime=t}else this._logEvent(l.HEART_BEAT)},_getWatchTimeClosingLogData:function s(t){this._lastPlayedTime=this._getVideoCurrentTime();return this._amendEventTime(babelHelpers["extends"]({video_last_start_time_position:this._lastStartTimePosition===o?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:this._lastPlayedTime},t))},_logOnce:function s(event,t){if(this._loggedEvents[event])return;this._logEvent(event,t)},_logEvent:function s(event,t){__p&&__p();this._loggedEvents[event]=true;var u=t?t:{};u.video_id=this.getVideoID();if(!Object.prototype.hasOwnProperty.call(u,"video_time_position"))u.video_time_position=this._getVideoCurrentTime();if(!u.time_ms)u.time_ms=Date.now();u.time=Math.round(u.time_ms/1e3);if(this.getAdClientToken){var v=this.getAdClientToken();if(v)u.ad_client_token=v}if(this.getPlayerFormat)u.player_format=this.getPlayerFormat();if(this.getPlayerOrigin)u.player_origin=this.getPlayerOrigin();if(this.getPlayerSuborigin)u.player_suborigin=this.getPlayerSuborigin();if(this.getExternalLogIDAndType){var w=this.getExternalLogIDAndType(),x=w.externalLogID,y=w.externalLogType;u.external_log_id=x;u.external_log_type=y}this._logFunction(event,u)},_logReadyToPlay:function s(){this._logOnce(l.READY_TO_PLAY)},onPause:function s(t){__p&&__p();this._logNextPlayingEvent=true;var u=this.getVideoElement();if(this._pendingPlayRequest){var v={debug_reason:this.getLastPlayReason()};this._pendingPlayRequest=false;this._logEvent(l.CANCELLED_REQUESTED_PLAYING,v);return}var event=u.ended||j.abortLoadingDecisioningLogic&&m.isEnded(t)?l.FINISHED_PLAYING:l.PAUSED,w=this._getVideoCurrentTime();if(w)this._lastPlayedTime=w;var x=this._lastPlayedTime,y=t.lastPauseReason;if(event===l.FINISHED_PLAYING)x=Math.max(x,u.duration);else if(this.preventPauseLoggingInMixin===true)return;else if(this.preventPauseLoggingInMixin===false)y=y||"unloaded";this._logEvent(event,this._amendEventTime({video_last_start_time_position:this._lastStartTimePosition===o?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:x,debug_reason:y},t));this._lastStartTimePosition=o},onEnded:function s(){this._logNextPlayingEvent=true;if(this._lastStartTimePosition!==o&&i.isBrowser("IE"))this.onPause({})},logRepresentationEnded:function s(t){__p&&__p();if(t){var u={representation_id:t.representationID,next_representation_id:t.nextRepresentationID,stream_switch_reason:t.streamSwitchReason};if(k.newStateChangeCalculation)u=this._getWatchTimeClosingLogData(u);this._logEvent(l.REPRESENTATION_ENDED,u);if(k.newStateChangeCalculation){var v=this._getVideoCurrentTime();this._lastStartTimePosition=v;this._lastPlayedTime=v}}},addWatchTimeData:function s(t){if(this._lastStartTimePosition!=o&&this._lastPlayedTime!=o){t.video_last_start_time_position=this._lastStartTimePosition;t.video_time_position=this._lastPlayedTime;this._lastStartTimePosition=o}return t},getLastPlayReason:function s(){return null},getVideoPlayReason:function s(){return null},onPlaying:function s(t){__p&&__p();if(!this._logNextPlayingEvent)return;if(k.superficialUnpauseEventsFix)this._logNextPlayingEvent=false;if(this._ignoreNextPlaying){this._ignoreNextPlaying=false;return}var u=this.getLastPlayReason();this._pendingPlayRequest=false;var event=this._loggedEvents[l.STARTED_PLAYING]?l.UNPAUSED:l.STARTED_PLAYING,v=this._amendEventTime({debug_reason:u,video_play_reason:this.getVideoPlayReason()},t),w=this._getVideoCurrentTime();if(k.useCurrentTimeAdjustment){var x=this.getVideoElement().currentTime,y=x-w;v.time_ms-=Math.round(y*1e3)}this._logEvent(event,v);this._lastStartTimePosition=w;this._lastPlayedTime=w;this._currentTimeAtLoadedMetadataCache=null},allowNextSeekInMixin:function s(){this._allowNextSeek=true},onSeeked:function s(t){__p&&__p();this._seeking=false;var u=this._seekSourceTimePosition;this._seekSourceTimePosition=o;if(this.preventSeekLoggingInMixin&&!this._allowNextSeek){if(!this._pendingPlayRequest)this._ignoreNextPlaying=true;return}this._allowNextSeek=false;this._ignoreNextPlaying=false;var v={video_seek_source_time_position:u};if(this._lastStartTimePosition!==o)v.video_last_start_time_position=this._lastStartTimePosition;else v.video_last_start_time_position=u;this._logEvent(l.SCRUBBED,this._amendEventTime(v,t));var w=this.getVideoElement();if(w.paused)this._lastStartTimePosition=o;else this._lastStartTimePosition=this._getVideoCurrentTime()},onSeeking:function s(t){this._currentTimeAtLoadedMetadataCache=null;if(!this._seeking){this._seekSourceTimePosition=this._getVideoCurrentTime();this._seeking=true}},onTimeUpdate:function s(t){this._currentTimeAtLoadedMetadataCache=null;var u=this.getVideoElement();if(!u.paused)this._lastPlayedTime=this._getVideoCurrentTime()},onVolumeChange:function s(t){__p&&__p();var u=this.getVideoElement(),v={},event=null;if(k.useFixedVolumeLogging){var w=u.muted,x=this._muted,y=u.volume,z=this._volume;v.current_volume=Math.round(y*100);this._volume=y;this._muted=w;var A=w||y==0,B=x||z==0;if(B&&A)return;if(B!=A)if(A)event=l.MUTED;else event=l.UNMUTED;else{if(z==y)return;if(y<z)event=l.VOLUME_DECREASE;else event=l.VOLUME_INCREASE}}else{if(u.muted!==this._muted&&u.volume===this._volume&&u.volume>0)event=u.muted?l.MUTED:l.UNMUTED;else{event=u.volume>this._volume?l.VOLUME_INCREASE:l.VOLUME_DECREASE;v.current_volume=Math.round(u.volume*100)}this._muted=u.muted;this._volume=u.volume}this._logEvent(event,this._amendEventTime(v,t))},_amendEventTime:function s(t,event){var u=this._useEventTime;if(k.fixEventTimeLogging)u=u&&event;if(u)return q(t,event);else t.time_ms=Date.now();return t},_getVideoCurrentTime:function s(){var t=this.getVideoElement().currentTime.toFixed(2);if(k.useCurrentTimeAdjustment)if(this._currentTimeAtLoadedMetadataCache!=null)t=this._currentTimeAtLoadedMetadataCache.toFixed(2);if(k.fixCurrentTimeType)return+t;return t},onLoadedMetadata:function s(t){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime}};f.exports=r}),null);
__d("VideoPlayerInitializationEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PLAYER_INITIALIZATION:"player_initialization",PLAYER_ALLOCATED:"player_allocated",REQUESTED_PLAYING:"requested_playing",STARTED_PLAYING:"started_playing",PLAYER_SENT_REQUEST:"player_sent",PLAYER_RECEIVED_FIRST_BYTE:"player_received_first_byte",BUFFER_READY:"buffer_ready",METADATA_READY:"metadata_ready"})}),null);
__d("VideoPlayerLoggerErrorStates",[],(function a(b,c,d,e,f,g){f.exports={PLAYBACK_FAILURE:"playback_failure",PLAYER_FAILURE:"player_failure"}}),null);
__d("VideoPlayerLoggerErrors",[],(function a(b,c,d,e,f,g){f.exports={ENTERED_FALLBACK:"entered_fallback",ERROR_CALLING_FLASH:"error_calling_flash"}}),null);
__d("VideoPlayerLoggerFallbackReasons",[],(function a(b,c,d,e,f,g){f.exports={TIMEOUT:"timeout",FLASH_ERROR:"flash_error",FLASH_UNAVAILABLE:"flash_unavailable"}}),null);
__d("VideoPlayerLoggerPlayerStates",[],(function a(b,c,d,e,f,g){f.exports={STARTED:"started",UNPAUSED:"unpaused"}}),null);
__d("VideoPlayerLoggerSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADS:"ads",ANIMATED_IMAGE_SHARE:"animated_image_share",ASSET:"asset",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",CAMERA_POST:"camera_post",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",CHANNEL:"channel",CONTINUE_WATCHING_RECOMMENDATION:"continue_watching_recommendation",EMBEDDED:"embedded",EMBEDDED_PAGE_PLUGIN:"embedded_page_plugin",EMBEDDED_VIDEO:"embedded_video",EMBEDDED_VIDEO_FROM_UFI:"embedded_video_from_ufi",EMBEDDED_VIDEO_PREVIEW:"embedded_video_preview",GAMEROOM_LIVE_VIDEO_HERO_BANNER:"gameroom_live_video_hero_banner",GAMEROOM_LIVE_VIDEO_TAB:"gameroom_live_video_tab",GAMEROOM_LIVE_VIDEO_THUMBNAIL:"gameroom_live_video_thumbnail",GAMES_VIDEO_HOME:"games_video_home",GAMES_VIDEO_HOME_HERO:"games_video_home_hero",GAMES_VIDEO_SINGLE_GAME:"games_video_single_game",GROUP_LIVE_VIDEO_MODULE:"group_live_video_module",HTML5:"html5",INLINE:"inline",INSIGHTS:"insights",ISSUES_MODULE:"issues_module",LIVE_BEEPER:"live_beeper",LIVE_CONTROL_PANEL:"live_control_panel",LIVE_MAP:"live_map",LIVE_MAP_LISTVIEW:"live_map_listview",LIVE_MAP_SIDEBAR:"live_map_sidebar",LIVE_MAP_TOOLTIP:"live_map_tooltip",LIVE_MAP_TOOLTIP_FROM_LISTVIEW:"live_map_tooltip_from_listview",LIVE_MAP_TOOLTIP_FROM_MAP:"live_map_tooltip_from_map",LIVE_MAP_TOOLTIP_FROM_WEBGL:"live_map_tooltip_from_webgl",LIVE_VIDEO_BROADCAST:"live_video_broadcast",LIVE_VIDEO_PREVIEW:"live_video_preview",LIVING_ROOM:"living_room",LOOKBACK:"lookback",MEDIA_COLLAGE:"media_collage",MEMORY_LEAK_TEST:"memory_leak_test",MESSAGING:"messaging",MISC:"misc",MOBILE:"mobile",OFFERS_DETAIL:"offers_detail",PAGE_LIVE_VIDEO_MODULE:"page_live_video_module",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_VIDEO_SET:"pages_video_set",PAGES_COVER:"pages_cover",PAGES_COVER_HOVER:"pages_cover_hover",PAGES_HOME_HERO:"pages_home_hero",PERMALINK:"permalink",PROFILE_OVERVIEW:"profile_overview",PROFILE_VIDEO:"profile_video",PROFILE_VIDEO_HOVERCARD:"profile_video_hovercard",PROFILE_VIDEO_THUMB:"profile_video_thumb",REPORT_FLOW:"report_flow",REVIEW:"review",SEARCH_LIVE_VIDEO_MODULE:"search_live_video_module",SLIDESHOW:"slideshow",SNOWLIFT:"snowlift",SRT_REVIEW:"srt_review",TAHOE:"tahoe",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",TV:"tv",USER_VIDEO_TAB:"user_video_tab",VIDEO_COPYRIGHT_PREVIEW:"video_copyright_preview",VIDEO_HOME_INLINE:"video_home_inline",VIDEO_INLINE_CHAINING:"video_inline_chaining",VIDEOHUB_FEATURED:"videohub_featured",VIDEOHUB_LIVE:"videohub_live",VIDEOHUB_PLAYLIST:"videohub_playlist",WATCH_SCROLL:"watch_scroll",LIVE_AUTOPLAY_WATCH_AND_SCROLL:"live_autoplay_watch_and_scroll"})}),null);
__d("VideoPlayerLogger",["Banzai","ErrorUtils","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerInitializationEvent","VideoPlayerLoggerErrors","VideoPlayerLoggerErrorStates","VideoPlayerLoggerEvent","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerPlayerStates","VideoPlayerLoggerSource","ex","invariant","performanceAbsoluteNow"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";__p&&__p();var v=k.useBanzaiVitalForLive,w=k.discerningAbandonStallLogging,x="video_player",y=5e3,z=function z(){return k.useMonotonicallyIncreasingTimers?u():Date.now()};function A(B,C){__p&&__p();this.$VideoPlayerLogger2=B;this.$VideoPlayerLogger3=null;this.$VideoPlayerLogger6={};this.$VideoPlayerLogger4=C;this.$VideoPlayerLogger8=0;this.$VideoPlayerLogger9=0;this.$VideoPlayerLogger7=[];this.$VideoPlayerLogger16=0;this.$VideoPlayerLogger17=0;this.$VideoPlayerLogger10=0;this.$VideoPlayerLogger22();this.$VideoPlayerLogger23()}A.prototype.updateSource=function(B){this.$VideoPlayerLogger2=B};A.prototype.getSource=function(){return this.$VideoPlayerLogger2};A.prototype.logEvent=function(event,B){__p&&__p();B=babelHelpers["extends"]({},B,this.$VideoPlayerLogger4);B.initial_event=!Object.prototype.hasOwnProperty.call(this.$VideoPlayerLogger6,event);if(!Object.prototype.hasOwnProperty.call(B,"time_ms"))B.time_ms=z();if(!Object.prototype.hasOwnProperty.call(B,"time"))B.time=Math.round(B.time_ms/1e3);B.is_stalling=this.$VideoPlayerLogger24();B.error_user_info=this.$VideoPlayerLogger25(B.error_user_info);if(this.$VideoPlayerLogger3)Object.assign(B,this.$VideoPlayerLogger3);switch(event){case l.PLAYER_INITIALIZATION:this.$VideoPlayerLogger5=B.time_ms;break;case l.REQUESTED_PLAYING:case l.STARTED_PLAYING:case l.PLAYER_ALLOCATED:case l.PLAYER_SENT_REQUEST:case l.PLAYER_RECEIVED_FIRST_BYTE:case l.BUFFER_READY:case l.METADATA_READY:if(!B.initial_event)break;B.elapsed_time_since_init=Date.now()-this.$VideoPlayerLogger5;break}switch(event){case o.QUALITY_CHANGE:case o.PAUSED:case o.FINISHED_PLAYING:if(this.$VideoPlayerLogger21){var C=this.$VideoPlayerLogger21,D=C.getABREvaluation();B.ideal_samples=D.idealSamples;B.conservative_samples=D.conservativeSamples;B.aggressive_samples=D.aggressiveSamples;B.conservative_resolution_constrained_samples=D.conservativeResolutionConstrainedSamples;B.last_quality_switch_reason=D.lastQualitySwitchReason;if(B.reason)C.setLastQualitySwitchReason(B.reason)}break}switch(event){case o.REQUESTED_PLAYING:this.$VideoPlayerLogger22();this.$VideoPlayerLogger26();if(this.$VideoPlayerLogger6[o.STARTED_PLAYING])B.state=q.UNPAUSED;else B.state=q.STARTED;break;case o.STARTED_PLAYING:case o.UNPAUSED:case o.FINISHED_PLAYING:case o.CANCELLED_REQUESTED_PLAYING:case o.ERROR:case o.PAUSED:case o.REPRESENTATION_ENDED:case o.HEART_BEAT:if(event===o.ERROR&&j.disableStallLoggingForError)break;if(event==o.REPRESENTATION_ENDED&&!this.$VideoPlayerLogger6[o.STARTED_PLAYING])break;if(event===o.HEART_BEAT&&(!this.$VideoPlayerLogger6[o.STARTED_PLAYING]||!k.heartbeatUpdateWatchTimeV2||this.$VideoPlayerLogger24()))break;if(event===o.HEART_BEAT)B.v2_heart_beat=true;if(event===o.STARTED_PLAYING||event===o.UNPAUSED){this.$VideoPlayerLogger10=B.time_ms;this.$VideoPlayerLogger27()}if(event===o.ERROR&&B.state!==n.PLAYBACK_FAILURE)break;if(event===o.CANCELLED_REQUESTED_PLAYING)if(this.$VideoPlayerLogger6[o.STARTED_PLAYING])B.state=q.UNPAUSED;else B.state=q.STARTED;this.$VideoPlayerLogger28();this.$VideoPlayerLogger29();if(event===o.PAUSED||event===o.FINISHED_PLAYING){if(w&&event===o.FINISHED_PLAYING)this.$VideoPlayerLogger27();B.recent_stalls_count=this.$VideoPlayerLogger30()}this.$VideoPlayerLogger31();this.$VideoPlayerLogger32(B);this.$VideoPlayerLogger33(B);this.$VideoPlayerLogger23();if(w)this.$VideoPlayerLogger27();this.$VideoPlayerLogger22();break}var E={logData:B,event:event,scriptPath:this.$VideoPlayerLogger1,source:this.$VideoPlayerLogger2};if(!event)i.reportError(new Error(s("VideoPlayerLogger: Missing event name")),false);this.$VideoPlayerLogger6[event]=true;if(this.$VideoPlayerLogger2===r.ANIMATED_IMAGE_SHARE)return null;if(B.ad_client_token||v&&B.playback_is_live_streaming)h.post(x,E,h.VITAL);else if(k.useVitalForClosing&&(event===o.PAUSED||event===o.FINISHED_PLAYING||event===o.HEART_BEAT))h.post(x,E,h.VITAL);else if(k.useVitalForOpening&&(event===o.UNPAUSED||event===o.STARTED_PLAYING))h.post(x,E,h.VITAL);else h.post(x,E);return E};A.prototype.setScriptPath=function(B){this.$VideoPlayerLogger1=B};A.prototype.setFTData=function(B){this.$VideoPlayerLogger3=B};A.prototype.setABRQualityTracker=function(B){this.$VideoPlayerLogger21=B};A.prototype.startBuffering=function(B){this.$VideoPlayerLogger26(B)};A.prototype.endBuffering=function(){this.$VideoPlayerLogger29();this.$VideoPlayerLogger34();this.$VideoPlayerLogger28();this.$VideoPlayerLogger31()};A.prototype.startInterrupt=function(){this.$VideoPlayerLogger35()};A.prototype.endInterrupt=function(){this.$VideoPlayerLogger29();this.$VideoPlayerLogger34()};A.prototype.$VideoPlayerLogger24=function(){return this.$VideoPlayerLogger13>0};A.prototype.$VideoPlayerLogger26=function(B){if(this.$VideoPlayerLogger24())return;this.$VideoPlayerLogger13=Date.now();if(B!==undefined&&this.$VideoPlayerLogger6[o.STARTED_PLAYING])this.$VideoPlayerLogger14=B};A.prototype.$VideoPlayerLogger35=function(){if(this.$VideoPlayerLogger36())return;this.$VideoPlayerLogger18=Date.now()};A.prototype.$VideoPlayerLogger36=function(){return this.$VideoPlayerLogger18>0};A.prototype.$VideoPlayerLogger37=function(){if(!this.$VideoPlayerLogger36())return 0;return Date.now()-this.$VideoPlayerLogger18};A.prototype.$VideoPlayerLogger38=function(){return this.$VideoPlayerLogger24()?Date.now()-this.$VideoPlayerLogger13:0};A.prototype.$VideoPlayerLogger29=function(){if(this.$VideoPlayerLogger36()){var B=this.$VideoPlayerLogger37();this.$VideoPlayerLogger19+=B;this.$VideoPlayerLogger17+=B;this.$VideoPlayerLogger20+=1;this.$VideoPlayerLogger16+=1}};A.prototype.$VideoPlayerLogger34=function(){if(this.$VideoPlayerLogger36())this.$VideoPlayerLogger18=0};A.prototype.$VideoPlayerLogger23=function(){this.$VideoPlayerLogger19=0;this.$VideoPlayerLogger20=0;this.$VideoPlayerLogger34()};A.prototype.$VideoPlayerLogger28=function(){__p&&__p();if(this.$VideoPlayerLogger24()){var B=this.$VideoPlayerLogger38();if(this.$VideoPlayerLogger14!==null)this.$VideoPlayerLogger15=B;this.$VideoPlayerLogger12+=B;this.$VideoPlayerLogger9+=B;this.$VideoPlayerLogger11++;this.$VideoPlayerLogger8++;if(w)this.$VideoPlayerLogger7.push(z())}};A.prototype.$VideoPlayerLogger31=function(){if(this.$VideoPlayerLogger24())this.$VideoPlayerLogger13=0};A.prototype.$VideoPlayerLogger25=function(B){if(B&&typeof B=="object")return JSON.stringify(B);return B};A.prototype.getCumulativeStallCount=function(){return this.$VideoPlayerLogger8};A.prototype.getStallCount=function(){return this.$VideoPlayerLogger11};A.prototype.getCumulativeStallTime=function(){return this.$VideoPlayerLogger9+this.$VideoPlayerLogger38()};A.prototype.getCumulativeInterruptCount=function(){return this.$VideoPlayerLogger16};A.prototype.getCumulativeInterruptTime=function(){return this.$VideoPlayerLogger17+this.$VideoPlayerLogger37()};A.prototype.$VideoPlayerLogger32=function(B){B.stall_time=Math.max(0,this.$VideoPlayerLogger12);B.stall_count=this.$VideoPlayerLogger11;if(this.$VideoPlayerLogger15){B.first_stall_time=this.$VideoPlayerLogger15;B.first_stall_start_position=this.$VideoPlayerLogger14}};A.prototype.$VideoPlayerLogger33=function(B){B.interrupt_time=Math.max(0,this.$VideoPlayerLogger19);B.interrupt_count=this.$VideoPlayerLogger20};A.prototype.$VideoPlayerLogger30=function(){var B=z(),C=B-y;this.$VideoPlayerLogger7=this.$VideoPlayerLogger7.filter(function(D){return D>=C});if(!w)if(this.$VideoPlayerLogger11>0)this.$VideoPlayerLogger7.push(B);return this.$VideoPlayerLogger7.length};A.prototype.$VideoPlayerLogger22=function(){this.$VideoPlayerLogger12=0;this.$VideoPlayerLogger13=0;this.$VideoPlayerLogger11=0;this.$VideoPlayerLogger14=null;this.$VideoPlayerLogger15=0};A.prototype.$VideoPlayerLogger27=function(){this.$VideoPlayerLogger7=[]};A.prototype.getFTdata=function(){return this.$VideoPlayerLogger3};A.Sources=r;A.Errors=m;A.FallbackReasons=p;A.ErrorStates=n;A.PlayerStates=q;f.exports=A}),null);
__d("VideoPlayerVersions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HTML5:"html5",PLEASANTVILLE:"pleasantville",REACT:"react",REACT_PLEASANTVILLE:"react_pleasantville",REACT_SILVERCITY:"react_silvercity",SILVERCITY:"silvercity",OLD_API_EXO:"old_api_exo",OLD_API_EXO_DEPRECATED:"old_api_exo_deprecated",OLD_API_EXO_NEW_LIB:"old_api_exo_new_lib",OLD_API_PSR:"old_api_psr",HEROPLAYER:"heroplayer",FNF:"fnf",LEGACY:"legacy",REFACTORED:"refactored",MBASIC:"mbasic",CASTING_DEBUG:"casting_debug",CHROMECAST:"chromecast",WEBAPIS_AVPLAY:"webapis_avplay",FBLITE_LEGACY:"fblite_legacy",FBLITE_SURFACE:"fblite_surface",FBLITE_TEXTURE:"fblite_texture",HERO_SURFACE:"hero_surface",HERO_TEXTURE:"hero_texture",UNKNOWN:"unknown"})}),null);
__d("HVideoPlayerLoggerMixin",["EventListener","HVideoPlayerMixin","VideoPlayerLogger","VideoPlayerLoggerEvent","VideoPlayerVersions"],(function a(b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m={},n={initLogger:function o(){__p&&__p();h.listen(this.getVideoElement(),"play",function(){return this._onPlayLogUnmute()}.bind(this));this._logger=new j(j.Sources.HTML5);var p=function(event,q){var r=this.getSavedOffline(),s=this.getConnectivityType(),t=this.getResourceUrl();q=babelHelpers["extends"]({},q,{player_version:l.HTML5,saved_offline:r,connectivity_type:s,resource_url:t});q=this.addVideoViewabilityToKeyEvents(event,q);if(event===k.UNMUTED)this._unmutedWasLogged=true;this._logger.logEvent(event,q)}.bind(this);i.initLogger.call(this,p)},_onPlayLogUnmute:function o(){var p=this.getLastPlayReason();if(!this._unmutedWasLogged&&!this.getVideoElement().muted&&p=="user_initiated")this._logEvent(k.UNMUTED)},getLogger:function o(){return this._logger},getAdClientToken:function o(){if(this.getConfig){var p=this.getConfig();if(p.ad_client_token)return p.ad_client_token}},getSavedOffline:function o(){return null},logDisplayed:function o(){this._logEvent(k.DISPLAYED,{is_auto_played:true})},logPauseEvent:function o(p){this.onPause(p?p:{})},logEvent:function o(event,p){this._logEvent(event,p)}};Object.assign(m,i);Object.assign(m,n);f.exports=m}),null);
__d("VideoPlayerLoggerEventField",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ABANDON_IN_STALL:"abandon_in_stall",ACCESS_TOKEN:"access_token",AD_CLIENT_TOKEN:"ad_client_token",AD_ID:"ad_id",API_CONFIG:"api_config",APP_ID:"app_id",APP_VERSION:"app_version",APPENDED_BYTE_SIZE:"appended_byte_size",AUDIO_CHANNEL_LAYOUT:"audio_ch_conf",AUTH_FLAG:"auth_flag",AUTOPLAY_ELIGIBLE:"autoplay_eligible",AUTOPLAY_FAILURE_REASONS:"autoplay_failure_reasons",AUTOPLAY_SETTING:"autoplay_setting",AVAILABLE_QUALITIES:"available_qualities",BATTERY_LEVEL:"battery_level",BROADCASTER_ORIGIN:"broadcaster_origin",BUILD_VERSION:"build_version",CAPTION_STATE:"caption_state",CAST_CLIENT_APP_ID:"cast_client_app_id",CAST_CLIENT_APP_VERSION:"cast_client_app_version",CAST_SESSION_ID:"cast_session_id",CHANNEL_ELIGIBILITY:"channel_eligibility",CHROMECAST_RECEIVER_AVAILABLE:"chromecast_receiver_available",CONNECTIVITY_SUBTYPE:"connectivity_subtype",CONNECTIVITY_TYPE:"connectivity_type",CREATOR_APP_ID:"creator_app_id",CURRENT_VIEWABILITY_PERCENTAGE:"current_viewability_percentage",VIEWABILITY_DEBUG_REASON:"viewability_debug_reason",CURRENT_VOLUME:"current_volume",DATA_CONNECTION_QUALITY:"data_connection_quality",DEBUG_REASON:"debug_reason",DEVICE_ID:"device_id",DURATION:"duration",ERROR:"error",ERROR_CODE:"error_code",ERROR_DESCRIPTION:"error_description",ERROR_DOMAIN:"error_domain",ERROR_USER_INFO:"error_user_info",EVENT_NAME:"name",EXTERNAL_LOG_ID:"external_log_id",EXTERNAL_LOG_TYPE:"external_log_type",FB_BANDWIDTH:"fb_bandwidth",FEED_POSITION:"feed_position",FIRST_STALL_START_POSITION:"first_stall_start_position",FIRST_STALL_TIME:"first_stall_time",FT:"ft",GKS:"gks",HAS_BEEN_LIVE:"has_been_live",HD:"hd",HEADSET_STATE:"headset_state",HLS_CURRENT_SEGMENT_URI:"current_segment_uri",HLS_LOADING_SEGMENT_URI:"loading_segment_uri",HLS_SEGMENT_URI:"segment_uri",HLS_STREAM_DATA:"stream_data",HOST_VIDEO_ID:"host_video_id",INLINE:"inline",INSTREAM_VIDEO_AD_BREAK_INDEX:"instream_video_ad_break_index",INSTREAM_VIDEO_AD_BREAK_VIDEO_ID:"instream_video_ad_break_video_id",INTERRUPT_COUNT:"interrupt_count",INTERRUPT_TIME:"interrupt_time",IS_ABR_ENABLED:"is_abr_enabled",IS_AUTO_ADVANCED:"is_auto_advanced",IS_FREE:"is_free",IS_HDS:"is_hds",IS_LIVE_STREAMING:"is_live_streaming",IS_SHOW_VIDEO:"is_show_video",IS_STALLING:"is_stalling",LAST_VIEWABILITY_PERCENTAGE:"last_viewability_percentage",NEXT_REPRESENTATION_ID:"next_representation_id",ORIGINAL_VIDEO_ID:"original_video_id",OUTER_STORY_IDENTIFIER:"outer_story_identifier",PLAYBACK_BROADCAST_STATUS:"playback_broadcast_status",PLAYBACK_DURATION:"playback_duration",PLAYBACK_IS_LIVE_STREAMING:"playback_is_live_streaming",PLAYER_FORMAT:"player_format",PLAYER_ORIGIN:"player_origin",PLAYER_STATE:"player_state",PLAYER_SUBORIGIN:"player_suborigin",PLAYER_VERSION:"player_version",POSITION_IN_CHANNEL:"position_in_channel",POSITION_IN_UNIT:"position_in_unit",PROJECTION:"projection",QES:"qes",REACTION_VIDEO_CHANNEL_ID:"video_channel_id",REACTION_VIDEO_CHANNEL_TYPE:"reaction_video_channel_type",REACTION_VIDEO_CHANNEL_SUBTYPE:"reaction_video_channel_subtype",REASON:"reason",RECENT_STALLS_COUNT:"recent_stalls_count",RECENT_STALLS_TOTAL_COUNT:"recent_stalls_total_count",REFERRER:"referrer",REPRESENTATION_ID:"representation_id",RESOURCE_URL:"resource_url",SAVED_OFFLINE:"saved_offline",SEQ_NUM:"seq_num",SESSION_START_TIME:"session_start_time",SHOW_VIDEO_TYPE:"show_video_type",SOURCE:"source",SPHERICAL_FALLBACK_TYPE:"spherical_fallback_type",STALL_COUNT:"stall_count",STALL_TIME:"stall_time",STATE:"state",STREAM_TYPE:"stream_type",STREAMING_FORMAT:"streaming_format",TIME:"time",TIME_DELTA:"time_delta",TIME_MS:"time_ms",TIME_SINCE_CREATION:"time_since_creation",TIME_SPENT_ID:"time_spent_id",TIME_UNTIL_INTERRUPT:"time_until_interrupt",TOTAL_STALL_TIME:"total_stall_time",TRACKING:"tracking",TV_SESSION_ID:"tv_session_id",UNIT_POSITION:"unit_position",USER_ASN:"user_asn",USER_ID:"user_id",V2_HEART_BEAT:"v2_heart_beat",VIDEO_BANDWIDTH:"video_bandwidth",VIDEO_CHAINING_DEPTH_LEVEL:"video_chaining_depth_level",VIDEO_CHAINING_SESSION_ID:"video_chaining_session_id",VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",VIDEO_HOME_SESSION_ID:"video_home_session_id",VIDEO_ID:"video_id",VIDEO_LAST_START_TIME_POSITION:"video_last_start_time_position",VIDEO_PLAY_REASON:"video_play_reason",VIDEO_PLAYER_HEIGHT:"video_player_height",VIDEO_PLAYER_WIDTH:"video_player_width",VIDEO_QUALITY:"video_quality",VIDEO_TIME_POSITION:"video_time_position",VIDEO_TIME_RATIO:"video_time_ratio",VIEWABILITY_PERCENTAGE:"viewability_percentage",WATCH_AND_GO_SESSION_ID:"watch_and_go_session_id"})}),null);
__d("MInlineVideoUnit",["DataAttributeUtils","EventListener","HVideoPlayerLoggerMixin","MInlineVideo","MVideoCache","MVideoExperiments","MVideoUtils","MVideoViewability","Stratcom","StratcomManager","SubscriptionsHandler","VideoPlayerLoggerEvent","VideoPlayerLoggerEventField","VideoPlayerReason","VideoViewabilityKeyEvents","mixin"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){__p&&__p();var x,y,z={PLAYING:"playing",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",SEEKED:"seeked",SEEKING:"seeking"},A=["canplay","play","seeked","seeking"];x=babelHelpers.inherits(B,w(j));y=x&&x.prototype;function B(C,D,E,F){"use strict";__p&&__p();y.constructor.call(this);this.$MInlineVideoUnit4=new r();this.$MInlineVideoUnit5=D;this.$MInlineVideoUnit6=C;this.$MInlineVideoUnit7=C.videoID;this.$MInlineVideoUnit8=C.playerOrigin;this.$MInlineVideoUnit9=C.playerFormat;this.$MInlineVideoUnit10=C.playerSuborigin;this.$MInlineVideoUnit1=false;this.$MInlineVideoUnit2=false;this.$MInlineVideoUnit11=E||u.USER;this.$MInlineVideoUnit12=C.src;this.$MInlineVideoUnit13=C[t.EXTERNAL_LOG_ID];this.$MInlineVideoUnit14=C[t.EXTERNAL_LOG_TYPE];A.forEach(function(event){q.enableDispatch(this.$MInlineVideoUnit5,event)}.bind(this));this.initLogger();if(F){var G=h.getDataFt(F),H={ft:JSON.parse(G)};this.getLogger().setFTData(H)}p.listen("m:page:unload",null,function(){this.$MInlineVideoUnit4.release();p.removeCurrentListener()}.bind(this));if(m.dispatchPauseWhenScrubbing){i.listen(this.getVideoElement(),z.PLAYING,function(){return this.$MInlineVideoUnit15()}.bind(this));i.listen(this.getVideoElement(),z.PAUSE,function(){return this.$MInlineVideoUnit16()}.bind(this));i.listen(this.getVideoElement(),z.ENDED,function(){return this.$MInlineVideoUnit17()}.bind(this));i.listen(this.getVideoElement(),z.TIMEUPDATE,function(){return this.$MInlineVideoUnit18()}.bind(this));i.listen(this.getVideoElement(),z.SEEKED,function(){return this.$MInlineVideoUnit19()}.bind(this));i.listen(this.getVideoElement(),z.SEEKING,function(){return this.$MInlineVideoUnit20()}.bind(this))}}B.prototype.$MInlineVideoUnit15=function(){"use strict";this.$MInlineVideoUnit3=z.PLAYING;this.$MInlineVideoUnit21()};B.prototype.$MInlineVideoUnit16=function(){"use strict";this.$MInlineVideoUnit3=z.PAUSE;this.$MInlineVideoUnit22()};B.prototype.$MInlineVideoUnit17=function(){"use strict";this.$MInlineVideoUnit3=z.ENDED;this.$MInlineVideoUnit22()};B.prototype.$MInlineVideoUnit19=function(){"use strict";this.$MInlineVideoUnit3=z.SEEKED};B.prototype.$MInlineVideoUnit20=function(){"use strict";this.$MInlineVideoUnit3=z.SEEKING;if(this.$MInlineVideoUnit1){this.$MInlineVideoUnit2=this.$MInlineVideoUnit1;this.$MInlineVideoUnit22();this.logPauseEvent({lastPauseReason:u.SEEK})}};B.prototype.$MInlineVideoUnit18=function(){"use strict";if(!this.$MInlineVideoUnit2||this.$MInlineVideoUnit3!==z.SEEKED)return;this.$MInlineVideoUnit3=z.TIMEUPDATE;this.$MInlineVideoUnit23()};B.prototype.$MInlineVideoUnit23=function(){"use strict";this.logEvent(s.REQUESTED_PLAYING,{debug_reason:u.SEEK});this.onPlaying();this.$MInlineVideoUnit21();this.$MInlineVideoUnit2=false};B.prototype.$MInlineVideoUnit21=function(){"use strict";this.$MInlineVideoUnit1=true};B.prototype.$MInlineVideoUnit22=function(){"use strict";this.$MInlineVideoUnit1=false};B.prototype.release=function(){"use strict";this.$MInlineVideoUnit4.release()};B.prototype.getPlayerFormat=function(){"use strict";return this.$MInlineVideoUnit9};B.prototype.getPlayerOrigin=function(){"use strict";return this.$MInlineVideoUnit8};B.prototype.getPlayerSuborigin=function(){"use strict";return this.$MInlineVideoUnit10};B.prototype.getSubscriptions=function(){"use strict";return this.$MInlineVideoUnit4};B.prototype.getVideoElement=function(){"use strict";return this.$MInlineVideoUnit5};B.prototype.getVideoID=function(){"use strict";return this.$MInlineVideoUnit7};B.prototype.getSavedOffline=function(){"use strict";return l.isVideoDownloaded(this.$MInlineVideoUnit7)};B.prototype.getConnectivityType=function(){"use strict";return n.getConnectivityType()};B.prototype.getLastPlayReason=function(){"use strict";return k.getLastActionReason()};B.prototype.getVideoPlayReason=function(){"use strict";return this.$MInlineVideoUnit11};B.prototype.getResourceUrl=function(){"use strict";if(m.shouldLogResourceUrl)return this.$MInlineVideoUnit12;return null};B.prototype.getExternalLogIDAndType=function(){"use strict";return{externalLogID:this.$MInlineVideoUnit13,externalLogType:this.$MInlineVideoUnit14}};B.prototype.addVideoViewabilityToKeyEvents=function(event,C){"use strict";var D=o.calculateViewabilityPercentage(this.$MInlineVideoUnit5);p.invoke("m:video:viewability:updateLastViewability",null,{viewabilityPercentage:D});if(v.Events.includes(event)&&o.shouldLog(this.$MInlineVideoUnit6)){var E;return babelHelpers["extends"]({},C,(E={},E[t.CURRENT_VIEWABILITY_PERCENTAGE]=D,E))}return C};B.prototype.logViewabilityChangeEvent=function(C){var D;"use strict";this.logEvent(s.VIEWABILITY_CHANGED,(D={},D[t.CURRENT_VIEWABILITY_PERCENTAGE]=C,D))};f.exports=B}),null);
__d("MVideoViewabilityLogging",["DOM","MInlineVideoDebugger","MInlineVideoUnit","MVideoViewability","Stratcom","SubscriptionsHandler","clearInterval","setInterval"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();function p(q,r,s,t,u){"use strict";__p&&__p();this.$MVideoViewabilityLogging14=function(){var v=k.calculateViewabilityPercentage(this.$MVideoViewabilityLogging4);if(this.$MVideoViewabilityLogging3!==v){this.$MVideoViewabilityLogging5.logViewabilityChangeEvent(v);this.$MVideoViewabilityLogging3=v;this.$MVideoViewabilityLogging13()}}.bind(this);this.$MVideoViewabilityLogging1=q;this.$MVideoViewabilityLogging4=r;this.$MVideoViewabilityLogging5=s;this.$MVideoViewabilityLogging6=t;this.$MVideoViewabilityLogging3=null;this.$MVideoViewabilityLogging9();this.$MVideoViewabilityLogging8=u}p.prototype.$MVideoViewabilityLogging9=function(){"use strict";if(!this.$MVideoViewabilityLogging2)this.$MVideoViewabilityLogging2=new m();this.$MVideoViewabilityLogging2.addSubscriptions(h.listen(this.$MVideoViewabilityLogging1,"pause",null,function(){return this.$MVideoViewabilityLogging10()}.bind(this)),h.listen(this.$MVideoViewabilityLogging1,"play",null,function(){return this.$MVideoViewabilityLogging11()}.bind(this)),l.listen("m:video:viewability:updateLastViewability",null,function(q){this.$MVideoViewabilityLogging12(q)}.bind(this)))};p.prototype.$MVideoViewabilityLogging12=function(q){"use strict";this.$MVideoViewabilityLogging3=q.getData().viewabilityPercentage;this.$MVideoViewabilityLogging13()};p.prototype.$MVideoViewabilityLogging13=function(){"use strict";if(this.$MVideoViewabilityLogging8)this.$MVideoViewabilityLogging8.updateViewabilityLoggingDebugger(this.$MVideoViewabilityLogging3)};p.prototype.$MVideoViewabilityLogging10=function(){"use strict";n(this.$MVideoViewabilityLogging7)};p.prototype.$MVideoViewabilityLogging11=function(){"use strict";this.$MVideoViewabilityLogging7=o(this.$MVideoViewabilityLogging14,this.$MVideoViewabilityLogging6)};p.prototype.releaseListeners=function(){"use strict";if(this.$MVideoViewabilityLogging2){this.$MVideoViewabilityLogging2.release();this.$MVideoViewabilityLogging2=null}n(this.$MVideoViewabilityLogging7)};f.exports=p}),null);
__d("MVideoPlaybackState",[],(function a(b,c,d,e,f,g){var h={NORMAL_PLAYBACK:"normalplayback",SLOW_PLAYBACK:"slowplayback",NOT_STARTED_PLAYBACK:"notstartedplayback"};f.exports=h}),null);
__d("MVideoAutoplayPlayerBase",["EventEmitter"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;function k(){var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.wasVisible=false,m}k.prototype.isVisible=function(){"use strict";throw new Error("Should be overridden")};k.prototype.getDistanceToViewport=function(){"use strict";throw new Error("Should be overridden")};k.prototype.playWithoutUnmute=function(l){"use strict";throw new Error("Should be overridden")};k.prototype.prepareForPlay=function(){"use strict";throw new Error("Should be overridden")};k.prototype.pause=function(l){"use strict";throw new Error("Should be overridden")};k.prototype.isAutoplayable=function(){"use strict";throw new Error("Should be overridden")};k.prototype.getDOMPosition=function(){"use strict";throw new Error("Should be overridden")};k.prototype.isLooping=function(){"use strict";throw new Error("Should be overridden")};k.prototype.isState=function(l){"use strict";throw new Error("Should be overridden")};k.prototype.setLastActionReason=function(l){"use strict";throw new Error("Should be overridden")};f.exports=k}),null);
__d("MVideoPlayerApiEvents",[],(function a(b,c,d,e,f,g){var h=["volumeChange","stateChange","fullscreenChange","destroyed","prepare"];f.exports=h}),null);
__d("MVideoPrefetcher",["Promise","Map","MVideoAutoplayConfig","Run"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=null,m=500;function n(){"use strict";this.$MVideoPrefetcher1=new i();this.$MVideoPrefetcher2=new i();this.$MVideoPrefetcher3=[];this.$MVideoPrefetcher4=[];this.$MVideoPrefetcher5=0;this.$MVideoPrefetcher6=1}n.prototype.$MVideoPrefetcher7=function(o,p,q){"use strict";__p&&__p();if(q.lastProgressValue*1e3>j.autoplay_prefetch_duration_threshold_ms||q.video.duration&&q.lastProgressValue>.9*q.video.duration){clearInterval(q.watchdog);this.$MVideoPrefetcher8(q);this.$MVideoPrefetcher2.set(q.url,true);o()}else{clearInterval(q.watchdog);this.$MVideoPrefetcher8(q);p(new Error("Insufficient data received for a video preload"))}};n.prototype.$MVideoPrefetcher9=function(o){"use strict";__p&&__p();var p=document.createElement("video");p.setAttribute("src",o);p.setAttribute("preload","auto");var q={};q.video=p;q.lastProgressTime=Date.now();q.lastProgressValue=0;q.url=o;var r=new h(function(s,t){__p&&__p();q.watchdog=setInterval(function(){var u=Date.now();if(u>q.lastProgressTime+j.autoplay_prefetch_waiting_time_ms)this.$MVideoPrefetcher7(s,t,q)}.bind(this),m);p.addEventListener("progress",function(){var u=p.buffered&&p.buffered.end&&p.buffered.length>0?p.buffered.end(0):0;if(u>q.lastProgressValue){q.lastProgressValue=u;q.lastProgressTimestamp=Date.now()}})}.bind(this));this.$MVideoPrefetcher10(o,r);this.$MVideoPrefetcher3.push(q);p.load();return r};n.prototype.$MVideoPrefetcher11=function(o){"use strict";var p=[];for(var q=0;q<o.length;q++){var r=n.createQueryStringURL(o[q]);if(!this.$MVideoPrefetcher1.has(r))p.push(this.$MVideoPrefetcher9(r))}return p};n.prototype.$MVideoPrefetcher12=function(o){"use strict";this.$MVideoPrefetcher5++;var p=this.$MVideoPrefetcher11(o.video);h.all(p).then(function(){this.$MVideoPrefetcher13()}.bind(this))["catch"](function(){return this.$MVideoPrefetcher13()}.bind(this))};n.prototype.$MVideoPrefetcher10=function(o,p){"use strict";__p&&__p();var q=!!this.$MVideoPrefetcher1.values().next().done;if(q)k.onLeave(function(){for(var r=0;r<this.$MVideoPrefetcher3.length;r++)this.$MVideoPrefetcher14(this.$MVideoPrefetcher3[r]);this.$MVideoPrefetcher3=[];this.$MVideoPrefetcher4=[];this.$MVideoPrefetcher5=0;this.$MVideoPrefetcher1.clear()}.bind(this));this.$MVideoPrefetcher1.set(o,p)};n.prototype.$MVideoPrefetcher14=function(o){"use strict";var p=o.video;p.setAttribute("src","");p.load&&p.load()};n.prototype.$MVideoPrefetcher8=function(o){"use strict";this.$MVideoPrefetcher14(o);var p=this.$MVideoPrefetcher3.indexOf(o);if(p>-1)this.$MVideoPrefetcher3.splice(p,1)};n.prototype.$MVideoPrefetcher13=function(){"use strict";this.$MVideoPrefetcher5--;var o=this.$MVideoPrefetcher4.shift();if(o)this.$MVideoPrefetcher12(o)};n.prototype.getAndDelete=function(o){"use strict";var p=this.$MVideoPrefetcher1.get(o);this.$MVideoPrefetcher1["delete"](o);return p};n.prototype.getPreloadCache=function(o){"use strict";return this.$MVideoPrefetcher2.get(o)};n.prototype.queueRequestBatch=function(o){"use strict";if(this.$MVideoPrefetcher6===0||this.$MVideoPrefetcher5<this.$MVideoPrefetcher6)this.$MVideoPrefetcher12(o);else this.$MVideoPrefetcher4.push(o)};n.getInstance=function(){"use strict";if(l===null)l=new n();return l};n.createQueryStringURL=function(o){"use strict";return o.url};n.loadVideo=function(o){"use strict";var p=n.getInstance();p.queueRequestBatch({video:[{url:o}]})};n.isVideoPreloaded=function(o){"use strict";return!!n.getInstance().getPreloadCache(o)};f.exports=n}),null);
__d("MVideoPreparer",["MVideoUtils","Run"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=null;function k(){"use strict";this.$MVideoPreparer1=null;this.$MVideoPreparer2=null}k.prototype.cleanupPreparedVideo=function(){"use strict";if(this.$MVideoPreparer2){var l=this.$MVideoPreparer2;l.setAttribute("src","");l.load()}this.$MVideoPreparer2=null;this.$MVideoPreparer1=null};k.prototype.prepare=function(l,m){"use strict";__p&&__p();if(!this.$MVideoPreparer1)i.onLeave(function(){this.cleanupPreparedVideo()}.bind(this));if(l!==this.$MVideoPreparer1){this.cleanupPreparedVideo();var n=h.createNodeFromTag("video");h.setAttributes(n,m);n.setAttribute("src",l);n.muted=true;n.setAttribute("preload","auto");n.load();this.$MVideoPreparer1=l;this.$MVideoPreparer2=n}};k.prototype.getVideo=function(l){"use strict";var m=null;if(this.$MVideoPreparer1===l){m=this.$MVideoPreparer2;this.$MVideoPreparer1=null;this.$MVideoPreparer2=null}return m};k.getInstance=function(){"use strict";if(j===null)j=new k();return j};k.prepareVideo=function(l,m){"use strict";var n=k.getInstance();n.prepare(l,m)};k.getPreparedVideo=function(l){"use strict";var m=k.getInstance();return m.getVideo(l)};f.exports=k}),null);
__d("MVideoPlayerController",["MLegacyDataStore","destroyOnUnload","EventEmitter","getElementPosition","MInlineVideo","MVideoPrefetcher","MVideoPreparer","Stratcom"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p,q,r="MVideoPlayerController_instance",s=null,t=null;p=babelHelpers.inherits(u,j);q=p&&p.prototype;function u(v,w){"use strict";q.constructor.call(this);this.$MVideoPlayerController2=w.video_ids;this.$MVideoPlayerController3=v.video_element;this.$MVideoPlayerController1=v.root_element;this.$MVideoPlayerController4="ready";this.$MVideoPlayerController6(this.$MVideoPlayerController3);this.$MVideoPlayerController5=null;u.$MVideoPlayerController7()}u.prototype.isFullscreen=function(){"use strict";return false};u.prototype.getVideoID=function(){"use strict";return this.$MVideoPlayerController2[0]};u.prototype.play=function(v){"use strict";this.emit("playRequested",v);this.sendPlayRequest(v)};u.prototype.prepareForPlay=function(){"use strict";var v=h.get(this.$MVideoPlayerController3),w=v&&v.src;if(w)n.prepareVideo(w,v)};u.prototype.sendPlayRequest=function(v){"use strict";var w=true,x=h.get(this.$MVideoPlayerController3),y=x&&x.src,z=null;if(y)z=n.getPreparedVideo(y);l.showPlayer(null,this.$MVideoPlayerController3,w,v,z);l.play(v)};u.prototype.pause=function(v){"use strict";this.emit("pauseRequested",v);l.pause(v)};u.prototype.isAutoplayable=function(){"use strict";return false};u.prototype.getDOMPosition=function(){"use strict";return k(this.getRootNode())};u.prototype.setState=function(v){"use strict";this.$MVideoPlayerController4=v;this.emit("stateChange")};u.prototype.isState=function(v){"use strict";return this.$MVideoPlayerController4===v};u.prototype.getVideoNode=function(){"use strict";return this.$MVideoPlayerController3};u.prototype.getRootNode=function(){"use strict";return this.$MVideoPlayerController1};u.prototype.setLastActionReason=function(v){"use strict";this.$MVideoPlayerController5=v;if(v)l.setLastActionReason(v)};u.prototype.getLastActionReason=function(){"use strict";return this.$MVideoPlayerController5};u.prototype.preload=function(){"use strict";var v=h.get(this.$MVideoPlayerController3),w=v&&v.src;if(w)m.loadVideo(w)};u.prototype.isPreloaded=function(){"use strict";var v=h.get(this.$MVideoPlayerController3),w=v&&v.src;return w&&m.isVideoPreloaded(w)};u.$MVideoPlayerController7=function(){"use strict";__p&&__p();if(s)return;s=[o.listen("m:video:player:play",null,function(v){var w=u.$MVideoPlayerController8(v);u.handleApiBeginPlayback(w)}),o.listen("m:video:player:pause",null,function(v){var w=u.$MVideoPlayerController8(v),x=!!(v.getData()&&v.getData().destroyed);u.handleApiPausePlayback(w,x)}),o.listen("m:video:player:ended",null,function(v){var w=u.$MVideoPlayerController8(v);u.handleApiFinishPlayback(w)}),o.listen("m:video:player:volumechange",null,function(v){var w=u.$MVideoPlayerController8(v);u.handleApiVolumeChange(w)}),o.listen("m:video:player:fullscreenchange",null,function(v){var w=u.$MVideoPlayerController8(v);u.handleApiFullScreenChange(w)}),o.listen("m:video:player:prepare",null,function(v){var w=u.$MVideoPlayerController8(v);u.handleApiPrepare(w)}),o.listen("m:video:player:destroy",null,function(v){var w=u.$MVideoPlayerController8(v);u.handleApiDestroyed(w)})];i(function(){if(s){s.forEach(function(v){return v.remove()});s=null}})};u.handleApiBeginPlayback=function(v){"use strict";var w=h.get(v)[r];w&&w.$MVideoPlayerController9()};u.handleApiPausePlayback=function(v,w){"use strict";var x=h.get(v)[r];x&&x.$MVideoPlayerController10(w)};u.handleApiFinishPlayback=function(v){"use strict";var w=h.get(v)[r];w&&w.$MVideoPlayerController11()};u.handleApiVolumeChange=function(v){"use strict";var w=h.get(v)[r];w&&w.$MVideoPlayerController12()};u.handleApiFullScreenChange=function(v){"use strict";var w=h.get(v)[r];w&&w.$MVideoPlayerController13()};u.handleApiDestroyed=function(v){"use strict";var w=h.get(v)[r];w&&w.$MVideoPlayerController14()};u.handleApiPrepare=function(v){"use strict";var w=h.get(v)[r];w&&w.$MVideoPlayerController15()};u.prototype.$MVideoPlayerController9=function(){"use strict";this.setState("playing")};u.prototype.$MVideoPlayerController10=function(v){"use strict";if(!this.isState("finished")&&!this.isState("ready"))if(!v)this.setState("paused");else this.setState("ready")};u.prototype.$MVideoPlayerController11=function(){"use strict";this.setState("finished")};u.prototype.$MVideoPlayerController12=function(){"use strict";this.emit("volumeChange")};u.prototype.$MVideoPlayerController13=function(){"use strict";this.emit("fullscreenChange")};u.prototype.$MVideoPlayerController14=function(){"use strict";this.setState("ready");this.emit("destroyed")};u.prototype.$MVideoPlayerController15=function(){"use strict";this.emit("prepare")};u.prototype.$MVideoPlayerController6=function(v){"use strict";var w={};w[r]=this;h.set(v,w)};u.$MVideoPlayerController8=function(v){"use strict";var w=v.getData();return w&&w.videoElement};u.isBrowserAutoplayEnabled=function(){"use strict";if(t===null){var v=document.createElement("video");v.muted=true;v.play();t=!v.paused;v.pause()}return t};f.exports=u}),null);
__d("VideoAutoplayValues",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ON:"on",OFF:"off",DOWNLOADED_ONLY:"downloaded_only",WIFI_ONLY:"wifi_only",DEFAULT_AUTOPLAY:"default_autoplay"})}),null);
__d("MFeedVideoPlayerController",["destroyOnUnload","getViewportDimensions","MVideoAutoplayPlayerBase","MVideoCache","MVideoCacheCleanUp","MVideoAutoplayConfig","MVideoDownloadState","MVideoDownloadStateHandler","MVideoPlayerApiEvents","MVideoPlayerController","MVideoUtils","MFullScreen","VideoAutoplayValues","VideoPlayerReason"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();var v,w,x=.5,y=0;v=babelHelpers.inherits(z,j);w=v&&v.prototype;function z(A,B){"use strict";__p&&__p();w.constructor.call(this);this.$MFeedVideoPlayerController1=B;this.$MFeedVideoPlayerController2=A;this.$MFeedVideoPlayerController3=B.controller;this.$MFeedVideoPlayerController5=false;this.$MFeedVideoPlayerController4=[];h(function(){this.$MFeedVideoPlayerController4.forEach(function(C){return C.remove()});this.$MFeedVideoPlayerController4=[]}.bind(this));this.$MFeedVideoPlayerController6();if(this.$MFeedVideoPlayerController1.should_autoplay)this.$MFeedVideoPlayerController7()}z.prototype.$MFeedVideoPlayerController7=function(){"use strict";if(q.isBrowserAutoplayEnabled()&&!k.isVideoDownloaded(this.getVideoID())&&this.$MFeedVideoPlayerController8()&&m.autoplay_prefetch_enabled)this.$MFeedVideoPlayerController3.preload&&this.$MFeedVideoPlayerController3.preload()};z.prototype.$MFeedVideoPlayerController8=function(){"use strict";__p&&__p();var A=this.$MFeedVideoPlayerController1.autoplay_setting;if(A===t.OFF)return false;else if(k.isVideoDownloaded(this.getVideoID()))return false;else if(A===t.WIFI_ONLY&&this.$MFeedVideoPlayerController9("WIFI"))return true;else if(A===t.ON&&this.$MFeedVideoPlayerController9())return true;return false};z.prototype.$MFeedVideoPlayerController9=function(A){"use strict";var B=r.getNetworkBandwidth()||0,C=r.getConnectivityType(),D=this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps!=null?this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps:m.autoplay_bandwidth_threshold_mbps,E=(!A||C===A)&&B>=D;return E};z.prototype.isVisible=function(){"use strict";if(this.$MFeedVideoPlayerController3.isFullscreen()||s.isFullScreen())return true;return r.isVisible(this.getDOMPosition())};z.prototype.getDistanceToViewport=function(){"use strict";if(this.$MFeedVideoPlayerController3.isFullscreen())return 0;var A=i().height,B=this.getDOMPosition();if(B.height===0)return-Infinity;var C=B.y+(1-x)*B.height;return C-A/2};z.prototype.playWithoutUnmute=function(A){"use strict";this.$MFeedVideoPlayerController3.play(A)};z.prototype.prepareForPlay=function(){"use strict";if(!k.isVideoDownloaded(this.getVideoID())&&m.autoplay_prefetch_enabled&&m.autoplay_prepare_next_video_enabled)this.$MFeedVideoPlayerController3.prepareForPlay()};z.prototype.pause=function(A){"use strict";this.$MFeedVideoPlayerController3.pause(A)};z.prototype.isAutoplayable=function(){"use strict";__p&&__p();var A=false,B=this.getVideoID();if(q.isBrowserAutoplayEnabled()&&!this.$MFeedVideoPlayerController5)if(this.$MFeedVideoPlayerController1.should_autoplay)if(k.isVideoDownloaded(B))A=false;else if(this.$MFeedVideoPlayerController8())if(m.autoplay_prefetch_required_for_playback)A=this.$MFeedVideoPlayerController3.isPreloaded();else A=true;return A};z.prototype.getDOMPosition=function(){"use strict";return this.$MFeedVideoPlayerController3.getDOMPosition()};z.prototype.isLooping=function(){"use strict";return false};z.prototype.getVideoID=function(){"use strict";return this.$MFeedVideoPlayerController3.getVideoID()};z.prototype.$MFeedVideoPlayerController6=function(){"use strict";var A=[["stateChange",function(C){return this.$MFeedVideoPlayerController10(C)}.bind(this)]],B=function(event){return this.emit.bind(this,event)}.bind(this);this.$MFeedVideoPlayerController4=A.map(function(C){return this.$MFeedVideoPlayerController3.addListener(C[0],C[1])}.bind(this)).concat(p.map(function(C){return this.$MFeedVideoPlayerController3.addListener(C,B(C))}.bind(this)));o.listen(this.getVideoID(),function(C){return this.$MFeedVideoPlayerController11(C)}.bind(this))};z.prototype.$MFeedVideoPlayerController10=function(){"use strict";this.$MFeedVideoPlayerController12()};z.prototype.$MFeedVideoPlayerController12=function(){"use strict";if(!this.isState("playing")&&this.getLastActionReason()===u.USER||this.isState("finished")){this.$MFeedVideoPlayerController5=true;this.emit("autoplayableChange")}};z.prototype.$MFeedVideoPlayerController11=function(A){"use strict";if(A.state===n.DOWNLOADED){this.$MFeedVideoPlayerController5=false;this.setLastActionReason(null);this.emit("autoplayableChange")}};z.prototype.isState=function(A){"use strict";return this.$MFeedVideoPlayerController3.isState(A)};z.prototype.getLastActionReason=function(){"use strict";return this.$MFeedVideoPlayerController3.getLastActionReason()};z.prototype.setLastActionReason=function(A){"use strict";this.$MFeedVideoPlayerController3.setLastActionReason(A);this.$MFeedVideoPlayerController12()};f.exports=z}),null);
__d("debounce",["debounceCore","setTimeout"],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n){if(l==null)l=100;var o=function o(p,q,r){return i(p,q,r,!n)};return h(k,l,m,o)}f.exports=j}),18);
__d("MVideoAutoplayControllerBase",["destroyOnUnload","debounce","MVideoExperiments","Stratcom","SubscriptionsHandler","throttle","VideoPlayerReason","Visibility"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();function p(q){"use strict";__p&&__p();this.$MVideoAutoplayControllerBase3=null;this.$MVideoAutoplayControllerBase2=null;this.$MVideoAutoplayControllerBase6=[];this.$MVideoAutoplayControllerBase1=q;this.$MVideoAutoplayControllerBase4=null;this.$MVideoAutoplayControllerBase5=new l();h(function(){this.$MVideoAutoplayControllerBase6=[];this.$MVideoAutoplayControllerBase3=null;if(this.$MVideoAutoplayControllerBase4){this.$MVideoAutoplayControllerBase4.remove();this.$MVideoAutoplayControllerBase4=null}this.$MVideoAutoplayControllerBase5.release()}.bind(this))}p.prototype.getVideoUnits=function(){"use strict";return this.$MVideoAutoplayControllerBase6};p.prototype.setVideoUnits=function(q){"use strict";this.$MVideoAutoplayControllerBase6=q};p.prototype.addVideoUnit=function(q){"use strict";this.$MVideoAutoplayControllerBase6.push(q)};p.prototype.getPlayingVideoUnit=function(){"use strict";return this.$MVideoAutoplayControllerBase3};p.prototype.setPlayingVideoUnit=function(q){"use strict";this.$MVideoAutoplayControllerBase3=q};p.prototype.playVideo=function(q,r){"use strict";this.setPlayingVideoUnit(q);if(this.$MVideoAutoplayControllerBase3)this.$MVideoAutoplayControllerBase3.playWithoutUnmute(r)};p.prototype.addSubscriberVideoUnit=function(){"use strict";if(!this.getVideoUnits().length){this.$MVideoAutoplayControllerBase5.addSubscriptions(k.listen("resize",null,this.updateAutoplay.bind(this)),k.listen("blur",null,this.$MVideoAutoplayControllerBase9.bind(this)),k.listen("focus",null,this.$MVideoAutoplayControllerBase10.bind(this)),o.addListener(o.HIDDEN,this.$MVideoAutoplayControllerBase9.bind(this)),o.addListener(o.VISIBLE,this.$MVideoAutoplayControllerBase10.bind(this)),k.listen("MScrollArea:scrollend",null,m(this.updateAutoplay.bind(this),this.$MVideoAutoplayControllerBase1)),k.listen("MScrollArea:scroll",null,m(this.updateAutoplay.bind(this),this.$MVideoAutoplayControllerBase1)),k.listen("MScrollArea:create",null,m(this.updateAutoplay.bind(this),this.$MVideoAutoplayControllerBase1)),k.listen("MScrollArea:reflow",null,m(this.updateAutoplay.bind(this),this.$MVideoAutoplayControllerBase1)));if(!this.$MVideoAutoplayControllerBase11())this.$MVideoAutoplayControllerBase12()}};p.prototype.$MVideoAutoplayControllerBase9=function(){"use strict";if(this.autoplayActive()&&!this.$MVideoAutoplayControllerBase2){this.$MVideoAutoplayControllerBase2=this.getPlayingVideoUnit();this.pausePlayingVideo(n.PAGE_VISIBILITY)}};p.prototype.$MVideoAutoplayControllerBase10=function(){"use strict";if(this.autoplayActive()&&this.$MVideoAutoplayControllerBase2){this.playVideo(this.$MVideoAutoplayControllerBase2,n.PAGE_VISIBILITY);this.$MVideoAutoplayControllerBase2=null}};p.prototype.$MVideoAutoplayControllerBase12=function(){"use strict";if(this.$MVideoAutoplayControllerBase4){this.$MVideoAutoplayControllerBase4.remove();this.$MVideoAutoplayControllerBase4=null}this.$MVideoAutoplayControllerBase7=m(this.updateAutoplay.bind(this),this.$MVideoAutoplayControllerBase1);this.$MVideoAutoplayControllerBase8=i(this.updateAutoplay.bind(this),this.$MVideoAutoplayControllerBase1);this.$MVideoAutoplayControllerBase4=k.listen("scroll",null,this.$MVideoAutoplayControllerBase13.bind(this))};p.prototype.$MVideoAutoplayControllerBase13=function(){"use strict";if(j.msite_autoplay_debounce_and_throttle){this.$MVideoAutoplayControllerBase7();this.$MVideoAutoplayControllerBase8()}else this.$MVideoAutoplayControllerBase7()};p.prototype.$MVideoAutoplayControllerBase11=function(){"use strict";return!!this.$MVideoAutoplayControllerBase4};p.prototype.getClosestVideoUnits=function(q,r){"use strict";return this.$MVideoAutoplayControllerBase6.filter(function(s){return s.getDistanceToViewport()>=0&&(!r||r&&s.isAutoplayable())}).sort(function(s,t){return s.getDistanceToViewport()-t.getDistanceToViewport()}).slice(0,q)};p.prototype.getVisibleUnits=function(){"use strict";__p&&__p();var q=[];this.$MVideoAutoplayControllerBase6.forEach(function(r){if(r.isVisible()){q.push(r);if(!r.wasVisible)r.wasVisible=true}else r.wasVisible=false});return q};p.prototype.pausePlayingVideo=function(q){"use strict";var r=this.$MVideoAutoplayControllerBase3;if(r){r.pause(q);this.$MVideoAutoplayControllerBase3=null}};p.prototype.updateAutoplay=function(){"use strict";throw new Error("Should be overridden")};p.prototype.autoplayActive=function(){"use strict";throw new Error("Should be overridden")};f.exports=p}),null);
__d("MVideoAutoplayControllerX",["destroyOnUnload","getViewportDimensions","MVideoAutoplayControllerBase","setImmediate","SubscriptionsHandler","VideoPlayerReason"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n,o,p=null,q=500;n=babelHelpers.inherits(r,j);o=n&&n.prototype;function r(){"use strict";o.constructor.call(this,q);this.$MVideoAutoplayControllerX1=true;this.$MVideoAutoplayControllerX2=new l();this.$MVideoAutoplayControllerX3=null;h(function(){this.$MVideoAutoplayControllerX4();if(this===p)p=null}.bind(this))}r.registerVideoUnit=function(s){"use strict";if(p==null)p=new r();p.addSubscriberVideoUnit();p.addVideoUnit(s);p.$MVideoAutoplayControllerX5(s);if(s.isVisible())p.updateAutoplay()};r.setShouldAutoplay=function(s){"use strict";if(p==null)p=new r();p.$MVideoAutoplayControllerX1=s;p.updateAutoplay()};r.prototype.$MVideoAutoplayControllerX4=function(){"use strict";this.$MVideoAutoplayControllerX2.release()};r.prototype.$MVideoAutoplayControllerX6=function(s){"use strict";if(s){s.setLastActionReason(m.USER);if(this.getPlayingVideoUnit())this.setPlayingVideoUnit(null)}this.$MVideoAutoplayControllerX3=s;this.updateAutoplay()};r.prototype.$MVideoAutoplayControllerX5=function(s){"use strict";__p&&__p();if(!s.addListener)return;var t=function(){if(this.getPlayingVideoUnit()==s&&s.isState("paused")||this.getPlayingVideoUnit()!=s&&s.isState("playing"))this.$MVideoAutoplayControllerX6(s);else if(s==this.$MVideoAutoplayControllerX3&&s.isState("finished"))this.$MVideoAutoplayControllerX6(null)}.bind(this),u=function(){if(s.isState("playing")||s.isState("paused"))this.$MVideoAutoplayControllerX6(s)}.bind(this),v=function(){if(this.getPlayingVideoUnit()!=s)this.$MVideoAutoplayControllerX6(s)}.bind(this),w=function(){this.updateAutoplay()}.bind(this),x=function(){if(this.$MVideoAutoplayControllerX3&&this.$MVideoAutoplayControllerX3==s)this.$MVideoAutoplayControllerX6(null)}.bind(this);this.$MVideoAutoplayControllerX2.addSubscriptions(this.$MVideoAutoplayControllerX7(s,"stateChange",t),this.$MVideoAutoplayControllerX7(s,"prepare",v),this.$MVideoAutoplayControllerX7(s,"volumeChange",u),this.$MVideoAutoplayControllerX7(s,"fullscreenChange",u),this.$MVideoAutoplayControllerX7(s,"autoplayableChange",w),this.$MVideoAutoplayControllerX7(s,"destroyed",x))};r.prototype.$MVideoAutoplayControllerX7=function(s,event,t){"use strict";var u=s.addListener(event,function(){k(function v(){t()})});return u};r.prototype.autoplayActive=function(){"use strict";if(this.$MVideoAutoplayControllerX3&&!this.$MVideoAutoplayControllerX3.isVisible()&&!this.$MVideoAutoplayControllerX3.isState("playing"))this.$MVideoAutoplayControllerX3=null;return this.$MVideoAutoplayControllerX3==null};r.prototype.updateAutoplay=function(){"use strict";__p&&__p();if(!this.autoplayActive())return;if(!this.$MVideoAutoplayControllerX1){this.pausePlayingVideo(m.AUTOPLAY);return}var s=this.getVisibleUnits(),t=s.length,u=null;if(t==1){u=s[0];u=u.isAutoplayable()?u:null}else if(t>1){var v=i().height/2;s.forEach(function(A){if(!A.isAutoplayable())return;var B=A.getDOMPosition(),C=B.y+B.height/2,D=Math.abs(C-v);A.playPriority=D;if(!u||typeof u.playPriority==="number"&&A.playPriority<u.playPriority)u=A})}if(this.getPlayingVideoUnit()){if(u!=this.getPlayingVideoUnit()){this.pausePlayingVideo(m.AUTOPLAY);this.playVideo(u,m.AUTOPLAY)}}else if(u)this.playVideo(u,m.AUTOPLAY);var w=this.getClosestVideoUnits(2,true),x=w.length,y=null;for(var z=0;z<x;z++)if(w[z]!==u){y=w[z];break}if(y)y.prepareForPlay()};f.exports=r}),null);
__d("MVideoFeedRegister",["MFeedVideoPlayerController","MVideoAutoplayControllerX"],(function a(b,c,d,e,f,g,h,i){var j={registerVideoUnit:function k(l,m){var n=new h(l,m);i.registerVideoUnit(n)}};f.exports=j}),null);