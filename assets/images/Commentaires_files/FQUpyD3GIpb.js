if (self.CavalryLogger) { CavalryLogger.start_js(["bG7hj"]); }

__d("FeedStoryCategory",[],(function a(b,c,d,e,f,g){f.exports={UNKNOWN:0,ORGANIC:1,ENGAGEMENT:2,FIXED_POSITION:3,PROMOTION:4,SPONSORED:5}}),null);
__d("MComposerFocusManager",["Stratcom","invariant"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j={init:function k(l){l||i(0);this._textarea=l;if(!this._listeners)this._registerListeners()},_registerListeners:function k(){this._listeners=[h.listen("m:feed-ufi:show",null,this._handleOpen.bind(this)),h.listen("m:feed-ufi:hide",null,this._handleClose.bind(this)),h.listen("m:page:unload",null,this._handleUnload.bind(this))]},_updateTabIndex:function k(l){this._textarea.setAttribute("tabindex",l?"":"-1")},_handleOpen:function k(){this._updateTabIndex(false)},_handleClose:function k(){this._updateTabIndex(true)},_handleUnload:function k(){this._listeners.forEach(function(l){return l.remove()});this._listeners=null}};f.exports=j}),null);
__d("XFeedNUXSaveSeenStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/feed/nux/seen/save/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}})}),null);
__d("MFeedNUXTooltip",["DOM","MRequest","MViewport","Stratcom","SubscriptionsHandler","XFeedNUXSaveSeenStateController","destroyOnUnload","mixInEventEmitter"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p={},q=void 0,r={},s=void 0,t=0,u=100,v=1,w=0;function x(){q=k.listen("scroll",null,z);n(y)}function y(){if(q)q.remove();q=null;window.clearTimeout(s);s=null}function z(){__p&&__p();var C=j.getHeight();if(s){window.clearTimeout(s);s=null}for(var D in p){var E=p[D],F=E.getNodes(),G=E.getHeadRoom();for(var H=0;H<F.length;H++){var I=F[H].getBoundingClientRect();if(I.top>=G&&I.bottom<=C){A(F[H],E);break}}}}function A(C,D){s=window.setTimeout(function(){if(D.getContext()!==C){D.setContext(C);D.show()}},t)}function B(C,D,E,F){"use strict";__p&&__p();if(!p.length)x();if(p[D]||r[D]){E.destroy();return}this.$MFeedNUXTooltip1=D;this.$MFeedNUXTooltip2=h.scry(document.getElementById("page"),"*",C);this.$MFeedNUXTooltip3=C;this.$MFeedNUXTooltip4=w;this.$MFeedNUXTooltip5=E;this.$MFeedNUXTooltip6=F===0?0:F||u;p[D]=this;var G=new l();G.addSubscriptions(this.$MFeedNUXTooltip5.addListener("show",this.emit.bind(this,"show")),this.$MFeedNUXTooltip5.addListener("hide",function(){this.emit("hide");G.release()}.bind(this)));z()}B.prototype.destroy=function(){"use strict";delete p[this.$MFeedNUXTooltip1];if(!Object.keys(p).length)y()};B.prototype.getContext=function(){"use strict";return this.$MFeedNUXTooltip5.getContext()};B.prototype.getNodes=function(){"use strict";return this.$MFeedNUXTooltip2};B.prototype.getHeadRoom=function(){"use strict";return this.$MFeedNUXTooltip6};B.prototype.getIsUnseen=function(){"use strict";return this.$MFeedNUXTooltip4===w};B.prototype.setContext=function(C){"use strict";this.$MFeedNUXTooltip5&&this.$MFeedNUXTooltip5.setContext(C)};B.prototype.show=function(){"use strict";if(!this.$MFeedNUXTooltip5||this.$MFeedNUXTooltip4===v)return;r[this.$MFeedNUXTooltip1]=true;this.$MFeedNUXTooltip4=v;this.$MFeedNUXTooltip5.show();var C=m.getURIBuilder().setString("key",this.$MFeedNUXTooltip1).setBool("seen",true);new i(C.getURI()).setMethod("POST").send();this.destroy()};B.prototype.hide=function(){"use strict";this.$MFeedNUXTooltip5&&this.$MFeedNUXTooltip5.hide()};o(B,{show:true,hide:true});f.exports=B}),null);
__d("MFeedReactionsNUX",["BanzaiLogger","MLegacyDataStore","MLiveData","Stratcom","SubscriptionsHandler","requestAnimationFrame"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();function n(p,q){__p&&__p();var r,s=q&&q.isCommentNUX;if(p)(function(){__p&&__p();var t=new l();t.addSubscriptions(k.listen("click","like-reaction-flyout",function(u){__p&&__p();var v,w=u.getNode("like-reaction-flyout"),x=u.getNode("feed-ufi-comments");if(!w||x)return;var y=i.get(w);if(s&&!y.isComment||!s&&y.isComment)return;var z=y.feedback_target||y.feedbackTarget;if(z)(function(){var A=j.get(z);t.addSubscriptions(A.listen("change",function(){if(A.getData().has_viewer_liked)m(function(){p.setContext(u.getTarget());p.show();o(z)})}))})()}),p.once("hide",function(){t.release()}));if(!s)t.addSubscriptions(k.listen("click","reactions-bling-bar",function(u){var v=u.getNode("mufi-inline").querySelector('a[data-sigil*="like-reaction-flyout"]');if(v){var w=u.getNode("feed-ufi-metadata"),x=i.get(w).feedback_target.toString();o(x);p.setContext(v);p.show();u.kill()}}));k.listen("m:page:unload",null,function(){k.removeCurrentListener();t.release()})})()}function o(p){h.log("WebReactionsNuxLoggerConfig",{feedback_id:p,"interface":"mTouch"})}f.exports.init=n}),null);
__d("MHome",["Stratcom"],(function a(b,c,d,e,f,g,h){function i(){h.listen("m:page:unload",null,function(j){h.invoke("m:homepage:unload");h.removeCurrentListener()});h.invoke("m:homepage:load")}f.exports={init:i}}),null);
__d("Time",[],(function a(b,c,d,e,f,g){var h={getGMTOffset:function i(j){var k=new Date(),l=k.getTimezoneOffset()/30,m=k.getTime()/1e3,n=Math.round((j-m)/1800),o=Math.round(l+n)%48;if(o>24)o-=Math.ceil(o/48)*48;else if(o<-28)o+=Math.ceil(o/-48)*48;return o*30}};f.exports=h}),null);
__d("AdAllocationIntegrityGapsInfo",["FeedStoryCategory"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j){"use strict";this.story_category=j;this.dist_to_top=-1;this.dist_to_fixed=-1;this.dist_to_promo=-1;this.dist_to_sponsored=-1;this.dist_to_engagement=-1}i.prototype.setDistToTop=function(j){"use strict";this.dist_to_top=j};i.prototype.setDistIfAbsent=function(j,k){"use strict";__p&&__p();if(k<0||j===h.UNKNOWN||j===h.ORGANIC)return;switch(j){case h.ENGAGEMENT:this.dist_to_engagement=this.$AdAllocationIntegrityGapsInfo1(k,this.dist_to_engagement);break;case h.FIXED_POSITION:this.dist_to_fixed=this.$AdAllocationIntegrityGapsInfo1(k,this.dist_to_fixed);break;case h.PROMOTION:this.dist_to_promo=this.$AdAllocationIntegrityGapsInfo1(k,this.dist_to_promo);break;case h.SPONSORED:this.dist_to_sponsored=this.$AdAllocationIntegrityGapsInfo1(k,this.dist_to_sponsored);break}};i.prototype.$AdAllocationIntegrityGapsInfo1=function(j,k){"use strict";if(k===-1)return j;return k};f.exports=i}),null);
__d("AdAllocationIntegrityUtils",["FeedStoryCategory","FBJSON","DataAttributeUtils"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k="data-story_category",l="data-dedupekey",m={getFeedStoryCategory:function n(o){__p&&__p();var p=i.parse(o.getAttribute("data-ft"),f.id),q=j.getDataAttribute(o,k);if(q)switch(q){case"2":return h.ENGAGEMENT;case"3":return h.FIXED_POSITION;case"4":return h.PROMOTION;default:return h.UNKNOWN}else if("ei"in p)return h.SPONSORED;else return h.ORGANIC},isGapRuleCategory:function n(o){if(o===h.SPONSORED||o===h.ENGAGEMENT||o===h.FIXED_POSITION||o===h.PROMOTION)return true;else return false},getDedupKey:function n(o){return j.getDataAttribute(o,l)}};f.exports=m}),null);
__d("FBFeedLocations",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NEWSFEED:1,GROUP:2,GROUP_PERMALINK:3,COMMUNITY:4,PERMALINK:5,SHARE_OVERLAY:6,PERMALINK_STREAM:7,GROUP_PINNED:8,FRIEND_LIST:9,TIMELINE:10,HASHTAG_FEED:11,TOPIC_FEED:12,PAGE:13,NOTIFICATION_FEED:14,GROUP_REPORTED:15,GROUP_PENDING:16,PAGES_FEED_IN_PAGES_MANAGER:17,TICKER_CLASSIC:18,PAGES_SUGGESTED_FEED_IN_PAGES_MANAGER:19,SEARCH:20,GROUP_SEARCH:21,NO_ATTACHMENT:22,EMBED:23,EMBED_FEED:24,ATTACHMENT_PREVIEW:25,STORIES_TO_SHARE:26,PROMPT_PERMALINK:27,TREND_HOVERCARD:28,OPEN_GRAPH_PREVIEW:30,HOTPOST_IN_PAGES_FEED:31,SCHEDULED_POSTS:32,TIMELINE_NOTES:33,PAGE_INSIGHTS:34,COMMENT_ATTACHMENT:35,PAGE_TIMELINE:36,GOODWILL_THROWBACK_PERMALINK:37,LIKE_CONFIRM:39,GOODWILL_THROWBACK_PROMOTION:40,BROWSE_CONSOLE:42,GROUP_FOR_SALE_COMPACT:43,ENTITY_FEED:44,GROUP_FOR_SALE_DISCUSSION:45,PAGES_CONTENT_TAB_PREVIEW:46,GOODWILL_THROWBACK_SHARE:47,TIMELINE_VIDEO_SHARES:48,EVENT:49,PAGE_PLUGIN:50,SRT:51,PAGES_CONTENT_TAB_INSIGHTS:52,ADS_PE_CONTENT_TAB_INSIGHTS:53,PAGE_ACTIVITY_FEED:54,VIDEO_CHANNEL:55,POST_TO_PAGE:56,GROUPS_GSYM_HOVERCARD:57,GROUP_POST_TOPIC_FEED:58,FEED_SURVEY:59,PAGES_MODERATION:60,SAVED_DASHBOARD:61,PULSE_SEARCH:62,GROUP_NUX:63,GROUP_NUX_POST_VIEW:64,EVENT_PERMALINK:65,FUNDRAISER_PAGE:66,EXPLORE_FEED:67,CRT:68,REVIEWS_FEED:69,VIDEO_HOME_CHANNEL:70,NEWS:71,TIMELINE_FRIENDSHIP:72,SAVED_REMINDERS:73,PSYM:74,ADMIN_FEED:75,CAMPFIRE_NOTE:76,PAGES_CONTEXT_CARD:77,ACTIVITY_LOG:78,WALL_POST_REPORT:79,TIMELINE_BREAKUP:80,POLITICIANS_FEED:81,PRODUCT_DETAILS:82,SPORTS_PLAY_FEED:83,GROUP_TOP_STORIES:84,PAGE_TIMELINE_PERMALINK:86,OFFERS_WALLET:87,INSTREAM_VIDEO_IN_LIVE:88,SPOTLIGHT:89,SEARCH_DERP:90,SOCIAL_BALLOT:91,GROUP_SUGGESTIONS_WITH_STORY:92,SOCIAL_BALLOT_PERMALINK:93,LOCAL_SERP:94,FUNDRAISER_SELF_DONATION_FEED:95,CONVERSATION_NUB:97,GROUP_TOP_SALE_STORIES:98,GROUP_LEARNING_COURSE_UNIT_FEED:99,SUPPORT_INBOX_READ_TIME_BLOCK:100,PAGE_POSTS_CARD:101,CRISIS_POST:102,SUPPORT_INBOX_GROUP_RESPONSIBLE:103,PAGE_POST_DIALOG:104,CRISIS_DIALOG_POST:105,PAGE_LIVE_VIDEOS_CARD:106,PAGE_POSTS_CARD_COMPACT:107,GROUP_MEMBER_BIO_FEED:108,LIVE_COMMENT_ATTACHMENT:109,GROUP_COMPOSER:110,GROUP_INBOX_GROUP:111,GROUP_INBOX_AGGREGATED:112,ENDORSEMENTS:113,EVENTS_DASHBOARD:114,CURATED_COLLECTIONS_PAGE:115,OYML:116,COLLEGE_HOMEPAGE:117,GROUP_LIVE_VIDEOS_CARD:118,COLLEGE_HIGHLIGHTS:119,VIDEO_PERMALINK:120,JOB_CAROUSEL_NETEGO:121,TOPIC_PAGE:122,USER_SCHEDULED_POSTS:123,GOODWILL_THROWBACK_ATTACHMENT_PREVIEW:124,INSTREAM_VIDEO_IN_WASLIVE:125,INSTREAM_VIDEO_IN_NONLIVE:126,SIGNAL_APP:127,ALBUM_FEED:128,TOP_MARKETPLACE_STORIES:129,CE_PII_STRIPPED_FEED:130,TAHOE:131,SAVE_COUNT_DIALOG:132,GROUP_POST_TAG_FEED:133,GOV_DIGEST:134,GROUP_SCHEDULED:135,GAMEROOM_FEED:136,WORKPLACE_HUB_PREVIEW:137,BRANDED_CONTENT_TRENDING_POSTS:138,GROUP_ANNOUNCEMENTS:139,GROUP_ANNOUNCEMENTS_FEED:140,EXTERN_CE_PII_STRIPPED_FEED:141,CRISIS_HUB_DESKTOP:142,GROUP_DRAFT_POSTS:143,TRENDING_ISSUES:144,GAME_HUB_FEED:145,LUMOS_POST_PREVIEW:146,BRANDED_CONTENT_PAGE_SETTINGS:147,PETITIONS:148,BC_MULTI_POST_REVIEW:149,ADS_TRANSPARENCY_SHOW_ADS:150,POLITICAL_POST_FEED:151,RECOMMENDATIONS_DASHBOARD:152,SEEN_CONTENT:153,BIRTHDAY_FEED:154,GROUP_HOISTED:155})}),null);
__d("MEntstreamViewportTracking",["AdAllocationIntegrityGapsInfo","AdAllocationIntegrityUtils","Banzai","DOM","FBFeedLocations","FBJSON","MViewport","MViewportTracking","DataAttributeUtils","StratcomManager","Vector"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s,t,u=51;s=babelHelpers.inherits(v,o);t=s&&s.prototype;v.init=function(w){q.enableDispatch(document,"scroll");new v().init(w)};v.prototype.getDataFromConfig=function(w){this.isLoose=true;this.isTimeTrackingEnabled=!!w.vpvd_logging;this.shouldWaterfallLogging=!!w.should_waterfall_logging;this.enableAdsAllocationIntegrityLogging=!!w.enable_ads_allocation_integrity_logging};v.prototype.__getStreamRoot=function(){if(!this.$MEntstreamViewportTracking1)this.$MEntstreamViewportTracking1=document.getElementById("root");return this.$MEntstreamViewportTracking1};v.prototype.getFBFeedLocation=function(){return l.NEWSFEED};v.prototype.getAllStories=function(){return k.scry(this.__getStreamRoot(),"article","story-div")};v.prototype.getTimeout=function(){return 300};v.prototype.getDataToLog=function(w){__p&&__p();var x=Object.assign(m.parse(w.getAttribute("data-ft"),f.id),{evt:u});if(!this.isTimeTrackingEnabled){var y=k.scry(w,"*","data-is-cta").map(function(K){var L=p.getDataFt(K),x=L&&JSON.parse(L);return x&&x.cta_types}).filter(function(K){return!!K});x.cta_types=y}if(this.enableAdsAllocationIntegrityLogging){var z=i.getFeedStoryCategory(w),A=new h(z),B=i.getDedupKey(w);if(i.isGapRuleCategory(z)&&B!==null){var C=this.getAllStories(),D=-1;for(var E=C.length-1;E>=0;E--){var F=i.getDedupKey(C[E]);if(D<0){if(F!==null&&B===F){D=E;A.setDistToTop(D+1)}}else{var G=i.getFeedStoryCategory(C[E]);if(i.isGapRuleCategory(G))A.setDistIfAbsent(G,D-E)}}}Object.assign(x,A)}var H,I,J;if("getBoundingClientRect"in w){H=w.getBoundingClientRect();I=H.height;J=H.top+n.getScrollTop()}else{I=r.getDim(w).y;J=r.getPos(w).y}x.evt_value=I;x.offset=J;x.story_height=I;x.impression_type=n.isLandscape()?"landscape":"portrait";if(this.shouldWaterfallLogging){x.should_waterfall_logging=1;x["interface"]="m_touch"}return x};v.prototype.getWaterfallData=function(w,x){var y=this.getDataToLog(w);y.step=x;return y};v.prototype.getStoryID=function(w){var x=w.getAttribute("data-ft");if(!x)return null;return m.parse(x,f.id).mf_story_key};v.prototype.sendDataToLog=function(w){j.post("feed_tracking",{ft:w})};function v(){s.apply(this,arguments)}f.exports=v}),null);
__d("XStoryChevronController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/story_chevron_menu/",{feedobjects_identifiers:{type:"String"},feed_context:{type:"String"},chevron_button_id:{type:"String"},story_node_id:{type:"String"},zombie_story:{type:"String"},is_menu_registered:{type:"Bool",defaultValue:false},outer_story_token:{type:"String"},show_report_ad_only:{type:"Bool",defaultValue:false}})}),null);
__d("MAsyncChevronMenu",["$","cx","CSS","requireWeak","BanzaiODS","MLegacyDataStore","DOM","MParent","MRequest","MTouchClick","Stratcom","SubscriptionsHandler","XStoryChevronController"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){__p&&__p();var u=null;k("MHideStoryActions",function(J){return u=J});var v,w,x,y,z,A,B;function C(J){var K=o.bySigil(J,"story-popup-metadata");return K}function D(){__p&&__p();l.bumpEntityKey("mtouch_async_chevron","chevron_clicked");var J=this.getCausalElement(),K=m.get(J),L=C(J),M=t.getURIBuilder().setBool("is_menu_registered",!!(u&&u.getActionBubble())).getURI(),N=new p(M);y&&j.show(y);z&&j.hide(z);A&&j.hide(A);v=L;N.setMethod("POST");N.setData({feedobjects_identifiers:K.feedobjectsIdentifiers,feed_context:K.feedContext,zombie_story:K.zombieStoryURI?K.zombieStoryURI:"",story_node_id:L&&L.id,chevron_button_id:J.id,outer_story_token:K.outerStoryToken?K.outerStoryToken:"",show_report_ad_only:B});N.listen("error",function(O){__p&&__p();l.bumpEntityKey("mtouch_async_chevron","request_failed");y&&j.hide(y);if(O=="status=0"){l.bumpEntityKey("mtouch_async_chevron","request_failed_no_internet_connection");z&&j.show(z);A&&j.hide(A)}else{l.bumpEntityKey("mtouch_async_chevron","request_failed_server_side_error");A&&j.show(A);z&&j.hide(z)}});N.listen("done",function(){l.bumpEntityKey("mtouch_async_chevron","request_done")});N.send()}function E(){if(x){x.release();x=null}w=null;y=null;z=null;A=null}function F(J,K){__p&&__p();if(w){w.destroy();E()}w=J;B=K;var L=J.getContentRoot();y=n.find(L,"div","loadingWrapper");z=n.find(L,"div","noConnectionWrapper");A=n.find(L,"div","requestErrorWrapper");x=new s();x.addSubscriptions(w.addListener("beforeshow",D,w),r.listen("m:page:unload",null,E),r.listen("m:story:action-bubble-initialized",null,function(M){var N=M.getData();if(N.menuNubID)G(h(N.menuNubID),N.wasOpen)}))}function G(J,K){__p&&__p();if(!w||!(w.isShown()||K))return;if(!u||!u.getActionBubble())return;w.hide();var L=C(J);if(v==L){var M=J.getElementsByClassName("_4s19")[0];q.click(M)}}function H(J,K,L,M,N){n.replace(h(K),J);if(!N)G(J,false)}function I(J){if(!v||v.id==J){w&&w.hide();v=null}}f.exports={init:F,replaceChevronTrigger:H,closeLoadingFlyout:I}}),null);
__d("TimezoneAutoset",["MRequest","Time"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k=function k(l){if(j)return;j=true;if(!l.time||l.offset===undefined)return;var m=-i.getGMTOffset(l.time);if(l.forceUpdate||m!=l.offset)new h(l.uri).setMethod("POST").setData({offset:m,is_forced:l.forceUpdate}).send()};g.main=k}),null);
__d("MComposerPostButton",["EventListener"],(function a(b,c,d,e,f,g,h){var i={clickListener:function j(k){h.listen(k,"click",function(event){window.setTimeout(function(){k.disabled=true},0)})}};f.exports=i}),null);
__d("MLoadTimeOutBanner",[],(function a(b,c,d,e,f,g){function h(i){var j=document.getElementById(i);if(j)j.style.display="inherit"}g.init=function(i,j){setTimeout(h.bind(null,i),j)}}),null);
__d("MTextMetrics",["DOM","MJSEnvironment"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=3*2;function k(l){"use strict";this._node=l;this._shadow=this._cloneNode();this._offset=this._getOffset()}k.prototype._cloneNode=function(){"use strict";var l=this._getComputedStyle(),m=h.create("pre",{className:"textMetrics",style:k.defaultStyles});l&&k.clonedStyles.forEach(function(n){var o=n.replace(/([A-Z])/g,"-$1").toLowerCase();m.style[n]=l.getPropertyValue(o)});h.appendContent(document.body,m);return m};k.prototype._getOffset=function(){"use strict";var l=this._getComputedStyle(),m=parseInt(l.paddingLeft,10)+parseInt(l.paddingRight,10)+parseInt(l.borderLeftWidth,10)+parseInt(l.borderRightWidth,10),n=parseInt(l.paddingTop,10)+parseInt(l.paddingBottom,10)+parseInt(l.borderTopWidth,10)+parseInt(l.borderBottomWidth,10);return{height:n,width:m}};k.prototype._getComputedStyle=function(){"use strict";if(window.getComputedStyle)return window.getComputedStyle(this._node,null);else if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(this._node,null)};k.prototype.measure=function(){"use strict";var l=this._node,m=this._shadow,n=this._offset,o=i.IS_APPLE_WEBKIT_IOS?j:0;m.style.width=l.offsetWidth-n.width-o+"px";m.innerText=l.value+"\n";return{width:m.clientWidth+n.width,height:m.clientHeight+n.height}};k.prototype.destroy=function(){"use strict";h.remove(this._shadow)};Object.assign(k,{clonedStyles:["fontFamily","fontSize","fontStyle","fontWeight","lineHeight","minHeight","whiteSpace","width","wordWrap"]});Object.assign(k.prototype,{_node:null,_shadow:null,_offset:null});f.exports=k}),null);
__d("InitMTextMetrics",["setTimeoutAcrossTransitions","setIntervalAcrossTransitions","DOM","MLegacyDataStore","MTextMetrics","Stratcom"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n,o,p="expandable-textarea",q=function q(r){__p&&__p();if(!o)t();if(n)return;n=true;function s(w){var x=new l(w),y={metrics:x,resizedInput:null,originalHeight:w.offsetHeight};k.set(w,y)}function t(){o=i(function(){var w=j.scry(document,"textarea",p);w.forEach(function(x){u(x)})},300)}function u(w,x){__p&&__p();var y=k.get(w);if(!y.metrics)s(w);if(w.value==y.resizedInput)return;y.resizedInput=w.value;var z=w.style.height;w.style.height=Math.max(0+y.metrics.measure().height,y.originalHeight)+"px";if(x&&z!=w.style.height){var A=w.value.substr(0,w.selectionStart).split("\n").length,B=w.value.split("\n").length;if(A===B)h(function(){w.scrollIntoView(true)},100)}}function v(event){var w=event.getNode(p);u(w,true)}m.listen(["focus","blur","keypress","keydown","keyup","input"],p,v);m.listen("m:page:unload",null,function(){__p&&__p();var w=j.scry(document,"textarea",p);w.forEach(function(x){var y=k.get(x);if(y.metrics){y.metrics.destroy();y.metrics=null;y.styleHeight=null;y.resizedInput=null}});clearInterval(o);o=null})};g.main=q}),null);